<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>A place for myself to write something</title>
  <icon>https://www.gravatar.com/avatar/d1190e693bb808854d9dec5eff6da1f2</icon>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://uames.github.io/"/>
  <updated>2019-03-13T03:41:11.906Z</updated>
  <id>https://uames.github.io/</id>
  
  <author>
    <name>uames</name>
    <email>uames.ji@gmail.com</email>
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>docker操作记录</title>
    <link href="https://uames.github.io/2019/2019-03-13-docker-operation-record/"/>
    <id>https://uames.github.io/2019/2019-03-13-docker-operation-record/</id>
    <published>2019-03-13T02:40:27.000Z</published>
    <updated>2019-03-13T03:41:11.906Z</updated>
    
    <content type="html"><![CDATA[<h4 id="搜索images中包含mysql的镜像"><a href="#搜索images中包含mysql的镜像" class="headerlink" title="搜索images中包含mysql的镜像"></a>搜索images中包含mysql的镜像</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search mysql</span><br></pre></td></tr></table></figure><h4 id="获取mysql镜像，且指定其tag为5-7-22"><a href="#获取mysql镜像，且指定其tag为5-7-22" class="headerlink" title="获取mysql镜像，且指定其tag为5.7.22"></a>获取mysql镜像，且指定其tag为5.7.22</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql:5.7.22</span><br></pre></td></tr></table></figure><h4 id="查看当前已pull的本地的images-镜像"><a href="#查看当前已pull的本地的images-镜像" class="headerlink" title="查看当前已pull的本地的images(镜像)"></a>查看当前已pull的本地的images(镜像)</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><h4 id="运行一个mysql容器，将容器的3306端口映射到本机的3308端口"><a href="#运行一个mysql容器，将容器的3306端口映射到本机的3308端口" class="headerlink" title="运行一个mysql容器，将容器的3306端口映射到本机的3308端口"></a>运行一个mysql容器，将容器的3306端口映射到本机的3308端口</h4><p>-d: Run container in background and print container ID</p><p>-p: Publish a container’s port(s) to the host</p><p>-e: Set environment variables</p><p>–name string: Assign a name to the container<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --name dev2-mysql -e MYSQL_ROOT_PASSWORD=123456 -p 3308:3306 -d mysql:5.7.22</span><br></pre></td></tr></table></figure></p><h4 id="通过执行bash登录dev2-mysql容器"><a href="#通过执行bash登录dev2-mysql容器" class="headerlink" title="通过执行bash登录dev2-mysql容器"></a>通过执行bash登录dev2-mysql容器</h4><p>-i: Keep STDIN open even if not attached</p><p>-t: Allocate a pseudo-TTY,<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker <span class="built_in">exec</span> -it dev2-mysql bash</span><br></pre></td></tr></table></figure></p><h4 id="列出所有容器"><a href="#列出所有容器" class="headerlink" title="列出所有容器"></a>列出所有容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><h4 id="停止、删除容器"><a href="#停止、删除容器" class="headerlink" title="停止、删除容器"></a>停止、删除容器</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker stop dev2-mysql</span><br><span class="line">docker rm dev2-mysql</span><br></pre></td></tr></table></figure><h4 id="运行容器并将一个本地目录映射到容器中。"><a href="#运行容器并将一个本地目录映射到容器中。" class="headerlink" title="运行容器并将一个本地目录映射到容器中。"></a>运行容器并将一个本地目录映射到容器中。</h4><p>-v: Bind mount a volume<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name mynginx -p 8080:80 -v /d/ysp:/usr/share/nginx nginx</span><br></pre></td></tr></table></figure></p><h4 id="查看当前运行中的容器占用的系统资源"><a href="#查看当前运行中的容器占用的系统资源" class="headerlink" title="查看当前运行中的容器占用的系统资源"></a>查看当前运行中的容器占用的系统资源</h4><p>–no-stream: Disable streaming stats and only pull the first result<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stats --no-stream</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;搜索images中包含mysql的镜像&quot;&gt;&lt;a href=&quot;#搜索images中包含mysql的镜像&quot; class=&quot;headerlink&quot; title=&quot;搜索images中包含mysql的镜像&quot;&gt;&lt;/a&gt;搜索images中包含mysql的镜像&lt;/h4&gt;&lt;figu
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>docker之dockertags查看image所有tag</title>
    <link href="https://uames.github.io/2019/2019-03-11-docker%E4%B9%8Bdockertags%E6%9F%A5%E7%9C%8Bimage%E6%89%80%E6%9C%89tag/"/>
    <id>https://uames.github.io/2019/2019-03-11-docker之dockertags查看image所有tag/</id>
    <published>2019-03-11T02:14:01.000Z</published>
    <updated>2019-03-13T03:42:17.678Z</updated>
    
    <content type="html"><![CDATA[<h3 id="鉴于昨天docker-pull-mysql自动安装了最终版（latest）的导致无法使用，后面才找到docker-pull-mysql-5-7-22可以下载5-7-22版的，但是怎么知道有这个tag版本存在呢？搜索docker-check-all-version-of-an-image找到如下代码，可在-usr-local-bin-目录下-touch-dockertags，然后放入下面的代码，再chmod-x-dockertags-赋予其运行的权限，然后dockertags-mysql即可查看到不同tag的mysql了。"><a href="#鉴于昨天docker-pull-mysql自动安装了最终版（latest）的导致无法使用，后面才找到docker-pull-mysql-5-7-22可以下载5-7-22版的，但是怎么知道有这个tag版本存在呢？搜索docker-check-all-version-of-an-image找到如下代码，可在-usr-local-bin-目录下-touch-dockertags，然后放入下面的代码，再chmod-x-dockertags-赋予其运行的权限，然后dockertags-mysql即可查看到不同tag的mysql了。" class="headerlink" title="鉴于昨天docker pull mysql自动安装了最终版（latest）的导致无法使用，后面才找到docker pull mysql:5.7.22可以下载5.7.22版的，但是怎么知道有这个tag版本存在呢？搜索docker check all version of an image找到如下代码，可在/usr/local/bin/目录下 touch dockertags，然后放入下面的代码，再chmod +x dockertags 赋予其运行的权限，然后dockertags mysql即可查看到不同tag的mysql了。"></a>鉴于昨天docker pull mysql自动安装了最终版（latest）的导致无法使用，后面才找到docker pull mysql:5.7.22可以下载5.7.22版的，但是怎么知道有这个tag版本存在呢？搜索docker check all version of an image找到如下代码，可在/usr/local/bin/目录下 touch dockertags，然后放入下面的代码，再chmod +x dockertags 赋予其运行的权限，然后dockertags mysql即可查看到不同tag的mysql了。</h3><h4 id="dockertags查看镜像对应的所有tag，dockertags命令程序需要自己创建。"><a href="#dockertags查看镜像对应的所有tag，dockertags命令程序需要自己创建。" class="headerlink" title="dockertags查看镜像对应的所有tag，dockertags命令程序需要自己创建。"></a>dockertags查看镜像对应的所有tag，dockertags命令程序需要自己创建。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dockertags mysql</span><br></pre></td></tr></table></figure><p>#!/bin/bash</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> -lt 1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">cat &lt;&lt; HELP</span><br><span class="line"></span><br><span class="line">dockertags  --  list all tags <span class="keyword">for</span> a Docker image on a remote registry.</span><br><span class="line"></span><br><span class="line">EXAMPLE: </span><br><span class="line">    - list all tags <span class="keyword">for</span> ubuntu:</span><br><span class="line">       dockertags ubuntu</span><br><span class="line"></span><br><span class="line">    - list all php tags containing apache:</span><br><span class="line">       dockertags php apache</span><br><span class="line"></span><br><span class="line">HELP</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">image=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">tags=`wget -q https://registry.hub.docker.com/v1/repositories/<span class="variable">$&#123;image&#125;</span>/tags -O -  | sed -e <span class="string">'s/[][]//g'</span> -e <span class="string">'s/"//g'</span> -e <span class="string">'s/ //g'</span> | tr <span class="string">'&#125;'</span> <span class="string">'\n'</span>  | awk -F: <span class="string">'&#123;print $3&#125;'</span>`</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ -n <span class="string">"<span class="variable">$2</span>"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">    tags=` <span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;tags&#125;</span>"</span> | grep <span class="string">"<span class="variable">$2</span>"</span> `</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$&#123;tags&#125;</span>"</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;鉴于昨天docker-pull-mysql自动安装了最终版（latest）的导致无法使用，后面才找到docker-pull-mysql-5-7-22可以下载5-7-22版的，但是怎么知道有这个tag版本存在呢？搜索docker-check-all-version-
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>基于html5的canvas的图片压缩工具</title>
    <link href="https://uames.github.io/2017/javascript/%E5%9F%BA%E4%BA%8Ehtml5%E7%9A%84canvas%E7%9A%84%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E5%B7%A5%E5%85%B7/"/>
    <id>https://uames.github.io/2017/javascript/基于html5的canvas的图片压缩工具/</id>
    <published>2017-10-19T11:21:18.000Z</published>
    <updated>2018-01-15T09:26:38.840Z</updated>
    
    <content type="html"><![CDATA[<h4 id="之前有开发过用户上传图片的功能（用户手机拍照的图片往往最少都有2M），当时使用了百度团队的-webupload-自带压缩图片功能，后来一直想要整理个简单的图片压缩工具，这次趁着项目需要，在网上搜索了下，整理出如下代码。"><a href="#之前有开发过用户上传图片的功能（用户手机拍照的图片往往最少都有2M），当时使用了百度团队的-webupload-自带压缩图片功能，后来一直想要整理个简单的图片压缩工具，这次趁着项目需要，在网上搜索了下，整理出如下代码。" class="headerlink" title="之前有开发过用户上传图片的功能（用户手机拍照的图片往往最少都有2M），当时使用了百度团队的 webupload, 自带压缩图片功能，后来一直想要整理个简单的图片压缩工具，这次趁着项目需要，在网上搜索了下，整理出如下代码。"></a>之前有开发过用户上传图片的功能（用户手机拍照的图片往往最少都有2M），当时使用了百度团队的 webupload, 自带压缩图片功能，后来一直想要整理个简单的图片压缩工具，这次趁着项目需要，在网上搜索了下，整理出如下代码。</h4><p>这是一个图片压缩工具，在success回调中可以拿到压缩后的canvas和base64图片数据。</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 这是基于html5的前端图片压缩工具。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">ImageResizer</span>(<span class="params">opts</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> settings = &#123;</span><br><span class="line">        resizeMode: <span class="string">"auto"</span> <span class="comment">//压缩模式，总共有三种  auto,width,height auto表示自动根据最大的宽度及高度等比压缩，width表示只根据宽度来判断是否需要等比例压缩，height类似。</span></span><br><span class="line">        ,</span><br><span class="line">        dataSource: <span class="string">""</span> <span class="comment">//数据源。数据源是指需要压缩的数据源，有三种类型，image图片元素，base64字符串，canvas对象，还有选择文件时候的file对象。。。</span></span><br><span class="line">        ,</span><br><span class="line">        dataSourceType: <span class="string">"image"</span> <span class="comment">//image  base64 canvas file</span></span><br><span class="line">        ,</span><br><span class="line">        maxWidth: <span class="number">150</span> <span class="comment">//允许的最大宽度</span></span><br><span class="line">        ,</span><br><span class="line">        maxHeight: <span class="number">200</span> <span class="comment">//允许的最大高度。</span></span><br><span class="line">        ,</span><br><span class="line">        onTmpImgGenerate: <span class="function"><span class="keyword">function</span> (<span class="params">img</span>) </span>&#123;&#125; <span class="comment">//当中间图片生成时候的执行方法。。这个时候请不要乱修改这图片，否则会打乱压缩后的结果。</span></span><br><span class="line">        ,</span><br><span class="line">        success: <span class="function"><span class="keyword">function</span> (<span class="params">resizeImgBase64, canvas</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="comment">//压缩成功后图片的base64字符串数据。</span></span><br><span class="line">        ,</span><br><span class="line">        ...opts <span class="comment">// 自定义设置覆盖默认设置</span></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">var</span> innerTools = &#123;</span><br><span class="line">        getBase64FromImgFile: <span class="function"><span class="keyword">function</span> (<span class="params">file, callBack</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">            reader.onload = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> base64Img = e.target.result;</span><br><span class="line">                <span class="keyword">if</span> (callBack) &#123;</span><br><span class="line">                    callBack(base64Img);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            reader.readAsDataURL(file);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//--处理数据源。。。。将所有数据源都处理成为图片对象，方便处理。</span></span><br><span class="line">        getImgFromDataSource: <span class="function"><span class="keyword">function</span> (<span class="params">datasource, dataSourceType, callback</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> _me = <span class="keyword">this</span>;</span><br><span class="line">            <span class="keyword">var</span> img1 = <span class="keyword">new</span> Image();</span><br><span class="line">            <span class="keyword">if</span> (dataSourceType == <span class="string">"img"</span> || dataSourceType == <span class="string">"image"</span>) &#123;</span><br><span class="line">                img1.src = $(datasource).attr(<span class="string">"src"</span>);</span><br><span class="line">                <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                    callback(img1);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dataSourceType == <span class="string">"base64"</span>) &#123;</span><br><span class="line">                img1.src = datasource;</span><br><span class="line">                <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                    callback(img1);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dataSourceType == <span class="string">"canvas"</span>) &#123;</span><br><span class="line">                img1.src = datasource.toDataURL(<span class="string">"image/jpeg"</span>);</span><br><span class="line">                <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                    callback(img1);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dataSourceType == <span class="string">"file"</span>) &#123;</span><br><span class="line">                _me.getBase64FromImgFile(<span class="function"><span class="keyword">function</span> (<span class="params">base64str</span>) </span>&#123;</span><br><span class="line">                    img1.src = base64str;</span><br><span class="line">                    <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                        callback(img1);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//计算图片的需要压缩的尺寸。当然，压缩模式，压缩限制直接从setting里面取出来。</span></span><br><span class="line">        getResizeSizeFromImg: <span class="function"><span class="keyword">function</span> (<span class="params">img</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> _img_info = &#123;</span><br><span class="line">                w: img.width,</span><br><span class="line">                h: img.height</span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="comment">// console.log("真实尺寸：", _img_info);</span></span><br><span class="line">            <span class="keyword">var</span> _resize_info = &#123;</span><br><span class="line">                w: <span class="number">0</span>,</span><br><span class="line">                h: <span class="number">0</span></span><br><span class="line">            &#125;;</span><br><span class="line">            <span class="keyword">if</span> (_img_info.w &lt;= settings.maxWidth &amp;&amp; _img_info.h &lt;= settings.maxHeight) &#123;</span><br><span class="line">                <span class="keyword">return</span> _img_info;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (settings.resizeMode == <span class="string">"auto"</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> _percent_scale = <span class="built_in">parseFloat</span>(_img_info.w / _img_info.h);</span><br><span class="line">                <span class="keyword">var</span> _size1 = &#123;</span><br><span class="line">                    w: <span class="number">0</span>,</span><br><span class="line">                    h: <span class="number">0</span></span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> _size_by_mw = &#123;</span><br><span class="line">                    w: settings.maxWidth,</span><br><span class="line">                    h: <span class="built_in">parseInt</span>(settings.maxWidth / _percent_scale)</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">var</span> _size_by_mh = &#123;</span><br><span class="line">                    w: <span class="built_in">parseInt</span>(settings.maxHeight * _percent_scale),</span><br><span class="line">                    h: settings.maxHeight</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">if</span> (_size_by_mw.h &lt;= settings.maxHeight) &#123;</span><br><span class="line">                    <span class="keyword">return</span> _size_by_mw;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (_size_by_mh.w &lt;= settings.maxWidth) &#123;</span><br><span class="line">                    <span class="keyword">return</span> _size_by_mh;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    w: settings.maxWidth,</span><br><span class="line">                    h: settings.maxHeight</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (settings.resizeMode == <span class="string">"width"</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (_img_info.w &lt;= settings.maxWidth) &#123;</span><br><span class="line">                    <span class="keyword">return</span> _img_info;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> _size_by_mw = &#123;</span><br><span class="line">                    w: settings.maxWidth,</span><br><span class="line">                    h: <span class="built_in">parseInt</span>(settings.maxWidth / _percent_scale)</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">return</span> _size_by_mw;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (settings.resizeMode == <span class="string">"height"</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (_img_info.h &lt;= settings.maxHeight) &#123;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">return</span> _img_info;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">var</span> _size_by_mh = &#123;</span><br><span class="line">                    w: <span class="built_in">parseInt</span>(settings.maxHeight * _percent_scale),</span><br><span class="line">                    h: settings.maxHeight</span><br><span class="line">                &#125;;</span><br><span class="line">                <span class="keyword">return</span> _size_by_mh;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">//--将相关图片对象画到canvas里面去。</span></span><br><span class="line">        drawToCanvas: <span class="function"><span class="keyword">function</span> (<span class="params">img, theW, theH, realW, realH, callback</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> canvas = <span class="built_in">document</span>.createElement(<span class="string">"canvas"</span>);</span><br><span class="line">            canvas.width = theW;</span><br><span class="line">            canvas.height = theH;</span><br><span class="line">            <span class="keyword">var</span> ctx = canvas.getContext(<span class="string">'2d'</span>);</span><br><span class="line">            ctx.drawImage(img,</span><br><span class="line">                <span class="number">0</span>, <span class="comment">//sourceX,</span></span><br><span class="line">                <span class="number">0</span>, <span class="comment">//sourceY,</span></span><br><span class="line">                realW, <span class="comment">//sourceWidth,</span></span><br><span class="line">                realH, <span class="comment">//sourceHeight,</span></span><br><span class="line">                <span class="number">0</span>, <span class="comment">//destX,</span></span><br><span class="line">                <span class="number">0</span>, <span class="comment">//destY,</span></span><br><span class="line">                theW, <span class="comment">//destWidth,</span></span><br><span class="line">                theH <span class="comment">//destHeight</span></span><br><span class="line">            );</span><br><span class="line">            <span class="comment">//--获取base64字符串及canvas对象传给success函数。</span></span><br><span class="line">            <span class="keyword">var</span> base64str = canvas.toDataURL(<span class="string">"image/png"</span>);</span><br><span class="line">            <span class="keyword">if</span> (callback) &#123;</span><br><span class="line">                callback(base64str, canvas);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//--开始处理。</span></span><br><span class="line">    (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        innerTools.getImgFromDataSource(settings.dataSource, settings.dataSourceType, <span class="function"><span class="keyword">function</span> (<span class="params">_tmp_img</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> __tmpImg = _tmp_img;</span><br><span class="line">            settings.onTmpImgGenerate(_tmp_img);</span><br><span class="line">            <span class="comment">//--计算尺寸。</span></span><br><span class="line">            <span class="keyword">var</span> _limitSizeInfo = innerTools.getResizeSizeFromImg(__tmpImg);</span><br><span class="line">            <span class="comment">// console.log(_limitSizeInfo);</span></span><br><span class="line">            <span class="keyword">var</span> _img_info = &#123;</span><br><span class="line">                w: __tmpImg.width,</span><br><span class="line">                h: __tmpImg.height</span><br><span class="line">            &#125;;</span><br><span class="line">            innerTools.drawToCanvas(__tmpImg, _limitSizeInfo.w, _limitSizeInfo.h, _img_info.w, _img_info.h, <span class="function"><span class="keyword">function</span> (<span class="params"></span></span></span><br><span class="line"><span class="function"><span class="params">                base64str, canvas</span>) </span>&#123;</span><br><span class="line">                settings.success(base64str, canvas); <span class="comment">// 最终回调</span></span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;)();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> &#123;&#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">dataURLtoBlob</span>(<span class="params">dataurl</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> arr = dataurl.split(<span class="string">','</span>),</span><br><span class="line">        mime = arr[<span class="number">0</span>].match(<span class="regexp">/:(.*?);/</span>)[<span class="number">1</span>],</span><br><span class="line">        bstr = atob(arr[<span class="number">1</span>]),</span><br><span class="line">        n = bstr.length,</span><br><span class="line">        u8arr = <span class="keyword">new</span> <span class="built_in">Uint8Array</span>(n);</span><br><span class="line">    <span class="keyword">while</span> (n--) &#123;</span><br><span class="line">        u8arr[n] = bstr.charCodeAt(n);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Blob([u8arr], &#123;</span><br><span class="line">        type: mime</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="你问我使用方法？自己看代码呀。什么你急着用没时间看？好吧，我大概写下。"><a href="#你问我使用方法？自己看代码呀。什么你急着用没时间看？好吧，我大概写下。" class="headerlink" title="你问我使用方法？自己看代码呀。什么你急着用没时间看？好吧，我大概写下。"></a>你问我使用方法？自己看代码呀。什么你急着用没时间看？好吧，我大概写下。</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ImageResizer, dataURLtoBlob &#125; <span class="keyword">from</span> <span class="string">'../utils/imageResizer'</span>;</span><br><span class="line"><span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader();</span><br><span class="line">reader.onload = <span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> base64Img= e.target.result;</span><br><span class="line">    <span class="comment">// document.getElementById('preview').src = base64Img;</span></span><br><span class="line">    <span class="comment">// 根据base64数据大小判断是否需要压缩</span></span><br><span class="line">    <span class="keyword">if</span> (base64Img.length&gt;<span class="number">300000</span>) &#123;</span><br><span class="line">      <span class="keyword">var</span> _ir=ImageResizer(&#123;</span><br><span class="line">          resizeMode:<span class="string">"auto"</span></span><br><span class="line">          ,<span class="attr">dataSource</span>:base64Img</span><br><span class="line">          ,<span class="attr">dataSourceType</span>:<span class="string">"base64"</span></span><br><span class="line">          ,<span class="attr">maxWidth</span>: <span class="number">500</span> <span class="comment">//允许的最大宽度</span></span><br><span class="line">          ,<span class="attr">maxHeight</span>: <span class="number">100000</span> <span class="comment">//允许的最大高度。</span></span><br><span class="line">          ,<span class="attr">onTmpImgGenerate</span>:<span class="function"><span class="keyword">function</span>(<span class="params">img</span>)</span>&#123;&#125;</span><br><span class="line">          ,<span class="attr">success</span>:<span class="function"><span class="keyword">function</span>(<span class="params">resizeImgBase64,canvas</span>)</span>&#123;</span><br><span class="line">            <span class="comment">// 这里处理已经压缩后的图片数据，将压缩后的图片上传到服务器。</span></span><br><span class="line">            <span class="keyword">var</span> data = uploadImg(resizeImgBase64);</span><br><span class="line">            <span class="comment">// data.url...</span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      uploadImg(base64Img);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 将base64的图片数据转化为formdata中的img上传到服务器</span></span><br><span class="line"><span class="keyword">var</span> uploadImg = <span class="function">(<span class="params">base64Img</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">var</span> blob = dataURLtoBlob(base64Img);</span><br><span class="line">  <span class="keyword">var</span> formdata=<span class="keyword">new</span> FormData();</span><br><span class="line">  formdata.append(<span class="string">"img"</span>, blob, <span class="string">"image.png"</span>);</span><br><span class="line">  <span class="comment">// 这里只是例子，真实情况请根据使用的工具框架灵活调整。</span></span><br><span class="line">  <span class="keyword">return</span> request(<span class="string">'/Tool/uploadImg'</span>, &#123;</span><br><span class="line">    method: <span class="string">'post'</span>,</span><br><span class="line">    body: formdata</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// file 为所选的图片文件类</span></span><br><span class="line">reader.readAsDataURL(file);</span><br></pre></td></tr></table></figure><h4 id="更新一下，上面的方法，在图片超过2M的情况下，只适合android手机，IOS系统请参考ios-imagefile-megapixel，这个项目把IOS系统拍照的方向问题也一并解决了"><a href="#更新一下，上面的方法，在图片超过2M的情况下，只适合android手机，IOS系统请参考ios-imagefile-megapixel，这个项目把IOS系统拍照的方向问题也一并解决了" class="headerlink" title="更新一下，上面的方法，在图片超过2M的情况下，只适合android手机，IOS系统请参考ios-imagefile-megapixel，这个项目把IOS系统拍照的方向问题也一并解决了."></a>更新一下，上面的方法，在图片超过2M的情况下，只适合android手机，IOS系统请参考<a href="https://github.com/uames/ios-imagefile-megapixel" target="_blank" rel="noopener">ios-imagefile-megapixel</a>，这个项目把IOS系统拍照的方向问题也一并解决了.</h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;之前有开发过用户上传图片的功能（用户手机拍照的图片往往最少都有2M），当时使用了百度团队的-webupload-自带压缩图片功能，后来一直想要整理个简单的图片压缩工具，这次趁着项目需要，在网上搜索了下，整理出如下代码。&quot;&gt;&lt;a href=&quot;#之前有开发过用户上传图
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>AppCache 与 ServiceWorkers</title>
    <link href="https://uames.github.io/2017/AppCache%E4%B8%8EServiceWorkers/"/>
    <id>https://uames.github.io/2017/AppCache与ServiceWorkers/</id>
    <published>2017-08-02T10:14:20.000Z</published>
    <updated>2018-01-15T08:33:00.923Z</updated>
    
    <content type="html"><![CDATA[<h3 id="先上两个链接-详细解说请见"><a href="#先上两个链接-详细解说请见" class="headerlink" title="先上两个链接(详细解说请见):"></a>先上两个链接(详细解说请见):</h3><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Using_the_application_cache" target="_blank" rel="noopener">AppCache</a></p><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Service_Worker_API/Using_Service_Workers" target="_blank" rel="noopener">ServiceWorkers</a></p><hr><h3 id="下面上菜-例子-鉴于AppCache已经从-Web-标准中删除-先说-ServiceWorkers"><a href="#下面上菜-例子-鉴于AppCache已经从-Web-标准中删除-先说-ServiceWorkers" class="headerlink" title="下面上菜(例子),鉴于AppCache已经从 Web 标准中删除, 先说 ServiceWorkers:"></a>下面上菜(例子),鉴于AppCache已经从 Web 标准中删除, 先说 ServiceWorkers:</h3><h4 id="ServiceWorkers-在html中直接调用了-navigator-serviceWorker-register"><a href="#ServiceWorkers-在html中直接调用了-navigator-serviceWorker-register" class="headerlink" title="ServiceWorkers, 在html中直接调用了 navigator.serviceWorker.register."></a><em>ServiceWorkers</em>, 在html中直接调用了 navigator.serviceWorker.register.</h4><p>这里有个要<em>特别注意</em>的:</p><ul><li>serviceWorker 的 js 文件所在的目录即为最大的 scope</li><li>在 scope 下的文件及这些文件及其加载的文件(如index.html在scope下,但加载了第三方图片)都会被 serviceWorker 缓存</li><li>故而 serviceWorker 文件一定要在 html 文件的同一个目录或者父级目录中, 否则无法缓存 html 文件, 即会导致无法离线访问!</li></ul><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE HTML&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"/css/test-manifest.css"</span> &gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    test-serviceworker</span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"https://lh4.googleusercontent.com/XX2Wn8SS8gcv9V1AVRJA2e1MeXaKD4OpnQ7eny2smq5WZZF_jwgI2NYvS5GA-OW35syQ63V-TspyDA=s600"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">  <span class="keyword">if</span> (<span class="string">'serviceWorker'</span> <span class="keyword">in</span> navigator) &#123;</span></span><br><span class="line"><span class="javascript">    navigator.serviceWorker.register(<span class="string">'/html/test-serviceworker.js'</span>, &#123;  &#125;).then(<span class="function"><span class="keyword">function</span>(<span class="params">reg</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(reg);</span></span><br><span class="line"><span class="javascript">      <span class="keyword">if</span>(reg.installing) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'Service worker installing'</span>);</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(reg.waiting) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'Service worker installed'</span>);</span></span><br><span class="line"><span class="javascript">      &#125; <span class="keyword">else</span> <span class="keyword">if</span>(reg.active) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'Service worker active'</span>);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;).catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">'Registration failed with '</span> + error);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">&#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><h5 id="test-serviceworker-js-文件的内容"><a href="#test-serviceworker-js-文件的内容" class="headerlink" title="test-serviceworker.js 文件的内容"></a>test-serviceworker.js 文件的内容</h5><p><em>该文件一定要在 html 文件的同一个目录或者父级目录中, 否则无法缓存 html 文件, 即会导致无法离线访问!</em><br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">self.addEventListener(<span class="string">'install'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.waitUntil(</span><br><span class="line">    caches.open(<span class="string">'v2'</span>).then(<span class="function"><span class="keyword">function</span>(<span class="params">cache</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> cache.addAll([</span><br><span class="line">        <span class="string">'/html/test-serviceworker.html'</span>,</span><br><span class="line">        <span class="string">'/css/test-manifest.css'</span></span><br><span class="line">      ]);</span><br><span class="line">    &#125;)</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">self.addEventListener(<span class="string">'fetch'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">  event.respondWith(caches.match(event.request).then(<span class="function"><span class="keyword">function</span>(<span class="params">response</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (response !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> fetch(event.request).then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">        <span class="comment">// response may be used only once</span></span><br><span class="line">        <span class="comment">// we need to save clone to put one copy in cache</span></span><br><span class="line">        <span class="comment">// and serve second one</span></span><br><span class="line">        <span class="keyword">let</span> responseClone = response.clone();</span><br><span class="line"></span><br><span class="line">        caches.open(<span class="string">'v2'</span>).then(<span class="function"><span class="keyword">function</span> (<span class="params">cache</span>) </span>&#123;</span><br><span class="line">          cache.put(event.request, responseClone);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> response;</span><br><span class="line">      &#125;).catch(<span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(err);</span><br><span class="line">        <span class="comment">// return caches.match('/sw-test/gallery/myLittleVader.jpg');</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p><hr><h4 id="AppCache-我用-nodejs-koa-写的appcache文件"><a href="#AppCache-我用-nodejs-koa-写的appcache文件" class="headerlink" title="AppCache, 我用 nodejs(koa) 写的appcache文件:"></a><em>AppCache</em>, 我用 nodejs(koa) 写的appcache文件:</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">router.get(<span class="string">'/cache.appcache'</span>, <span class="keyword">async</span> (ctx, next) =&gt; &#123;</span><br><span class="line">  ctx.response.set(<span class="string">'Content-Type'</span>, <span class="string">'text/cache-manifest'</span>);</span><br><span class="line">  ctx.body = [</span><br><span class="line">    <span class="string">`CACHE MANIFEST<span class="subst">$&#123;process.env.UPDATE_MANIFEST&#125;</span>`</span>,</span><br><span class="line">    <span class="string">"/css/test-manifest.css"</span>,</span><br><span class="line">    <span class="string">"/js/test-manifest.js"</span></span><br><span class="line">  ].join(<span class="string">"\n"</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h5 id="process-env-UPDATE-MANIFEST-是一个数字-用来更新缓存文件"><a href="#process-env-UPDATE-MANIFEST-是一个数字-用来更新缓存文件" class="headerlink" title="process.env.UPDATE_MANIFEST 是一个数字,用来更新缓存文件."></a>process.env.UPDATE_MANIFEST 是一个数字,用来更新缓存文件.</h5><h5 id="下面的代码将该数字转为对应数量的空格字符串"><a href="#下面的代码将该数字转为对应数量的空格字符串" class="headerlink" title="下面的代码将该数字转为对应数量的空格字符串:"></a>下面的代码将该数字转为对应数量的空格字符串:</h5><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> num = process.env.UPDATE_MANIFEST;</span><br><span class="line">process.env.UPDATE_MANIFEST = (<span class="keyword">new</span> <span class="built_in">Array</span>(<span class="built_in">Number</span>(num?num:<span class="number">0</span>)).fill(<span class="string">" "</span>)).join(<span class="string">""</span>);</span><br></pre></td></tr></table></figure><hr><p>总结一下啊,不知道你有没有发现, ServiceWorkers 基本是前端的活, AppCache 基本是后端的活.<br>单纯这一条就让我觉得 ServiceWorkers 比 AppCache 更优秀! 不过 ServiceWorkers 在 Safari 浏览器上还不受支持.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;先上两个链接-详细解说请见&quot;&gt;&lt;a href=&quot;#先上两个链接-详细解说请见&quot; class=&quot;headerlink&quot; title=&quot;先上两个链接(详细解说请见):&quot;&gt;&lt;/a&gt;先上两个链接(详细解说请见):&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;https://devel
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>nginx-vhost配置示例</title>
    <link href="https://uames.github.io/2017/nginx-vhost%E9%85%8D%E7%BD%AE%E7%A4%BA%E4%BE%8B/"/>
    <id>https://uames.github.io/2017/nginx-vhost配置示例/</id>
    <published>2017-07-21T11:12:58.000Z</published>
    <updated>2018-01-15T08:33:00.930Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">upstream</span> <span class="selector-tag">nodejs</span> &#123;</span><br><span class="line">    server 127.0.0.1:3000;</span><br><span class="line">    <span class="selector-id">#server</span> 127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:3001</span>;</span><br><span class="line">    <span class="selector-tag">keepalive</span> 64;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">server</span> &#123;</span><br><span class="line">        listen       80;</span><br><span class="line">        <span class="selector-tag">server_name</span>  <span class="selector-tag">www</span><span class="selector-class">.example</span><span class="selector-class">.com</span>;</span><br><span class="line">        <span class="selector-id">#charset</span> <span class="selector-tag">koi8-r</span>;</span><br><span class="line"></span><br><span class="line">        #access_log  logs/host.access.log  main;</span><br><span class="line"></span><br><span class="line">        location ~ /upload/image &#123;</span><br><span class="line">            root /www/oa/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ /php &#123;</span><br><span class="line">            root /www/oa/;</span><br><span class="line"></span><br><span class="line">            <span class="selector-tag">include</span> <span class="selector-tag">fastcgi_params</span>;</span><br><span class="line">            #<span class="selector-id">#pathinfo</span>支持<span class="selector-tag">start</span></span><br><span class="line">            #定义变量 $path_info ，用于存放pathinfo信息</span><br><span class="line">            set $path_info "";</span><br><span class="line">            #定义变量 $real_script_name，用于存放真实地址</span><br><span class="line">            set $real_script_name $fastcgi_script_name;</span><br><span class="line">            #如果地址与引号内的正则表达式匹配</span><br><span class="line">            if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") &#123;</span><br><span class="line">                    #将文件地址赋值给变量 $real_script_name</span><br><span class="line">                    set $real_script_name $1;</span><br><span class="line">                    #将文件地址后的参数赋值给变量 $path_info</span><br><span class="line">                    set $path_info $2;</span><br><span class="line">            &#125;</span><br><span class="line">            #配置<span class="selector-tag">fastcgi</span>的一些参数</span><br><span class="line">            fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;</span><br><span class="line">            fastcgi_param SCRIPT_NAME $real_script_name;</span><br><span class="line">            fastcgi_param PATH_INFO $path_info;</span><br><span class="line">            ##<span class="selector-id">#pathinfo</span>支持<span class="selector-tag">end</span></span><br><span class="line">            <span class="selector-tag">fastcgi_intercept_errors</span> <span class="selector-tag">on</span>;</span><br><span class="line">            <span class="selector-tag">fastcgi_pass</span>   127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:9000</span>;</span><br><span class="line">            <span class="selector-tag">fastcgi_read_timeout</span> 600;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ /ueditor &#123;</span><br><span class="line">            root /www/oa/;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~ /shop &#123;</span><br><span class="line">                proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">                proxy_set_header Host  $http_host;</span><br><span class="line">                <span class="selector-tag">proxy_set_header</span> <span class="selector-tag">X-Nginx-Proxy</span> <span class="selector-tag">true</span>;</span><br><span class="line">                <span class="selector-tag">proxy_set_header</span> <span class="selector-tag">Connection</span> "";</span><br><span class="line">                proxy_pass      http://nodejs;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location / &#123;</span><br><span class="line">            root   /www/oa/html;</span><br><span class="line">            <span class="selector-tag">index</span>  <span class="selector-tag">index</span><span class="selector-class">.html</span> <span class="selector-tag">index</span><span class="selector-class">.htm</span> *<span class="selector-class">.xls</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        location ~* ^.+\.(css|js|oa|txt|xml|swf|wav)$ &#123;</span><br><span class="line">            root /www/oa/html;</span><br><span class="line">            <span class="selector-tag">access_log</span>   <span class="selector-tag">off</span>;</span><br><span class="line">            <span class="selector-tag">expires</span>      24<span class="selector-tag">h</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        location ~* ^.+\.(html|htm)$ &#123;</span><br><span class="line">            root /www/oa/html;</span><br><span class="line">                <span class="selector-tag">expires</span>      1<span class="selector-tag">h</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        location /zytb &#123;</span><br><span class="line">                if (!-e $request_filename)&#123;</span><br><span class="line">                        rewrite ^/zytb(.*)$ /zytb/index.php$1 last;</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">location</span> ~ \<span class="selector-class">.php</span> &#123;</span><br><span class="line">            root /www/oa/php;</span><br><span class="line"></span><br><span class="line">            <span class="selector-tag">include</span> <span class="selector-tag">fastcgi_params</span>;</span><br><span class="line">            #<span class="selector-id">#pathinfo</span>支持<span class="selector-tag">start</span></span><br><span class="line">            #定义变量 $path_info ，用于存放pathinfo信息</span><br><span class="line">            set $path_info "";</span><br><span class="line">            #定义变量 $real_script_name，用于存放真实地址</span><br><span class="line">            set $real_script_name $fastcgi_script_name;</span><br><span class="line">            #如果地址与引号内的正则表达式匹配</span><br><span class="line">            if ($fastcgi_script_name ~ "^(.+?\.php)(/.+)$") &#123;</span><br><span class="line">                    #将文件地址赋值给变量 $real_script_name</span><br><span class="line">                    set $real_script_name $1;</span><br><span class="line">                    #将文件地址后的参数赋值给变量 $path_info</span><br><span class="line">                    set $path_info $2;</span><br><span class="line">            &#125;</span><br><span class="line">            #配置<span class="selector-tag">fastcgi</span>的一些参数</span><br><span class="line">            fastcgi_param SCRIPT_FILENAME $document_root$real_script_name;</span><br><span class="line">            fastcgi_param SCRIPT_NAME $real_script_name;</span><br><span class="line">            fastcgi_param PATH_INFO $path_info;</span><br><span class="line">            ##<span class="selector-id">#pathinfo</span>支持<span class="selector-tag">end</span></span><br><span class="line">            <span class="selector-tag">fastcgi_intercept_errors</span> <span class="selector-tag">on</span>;</span><br><span class="line">            <span class="selector-tag">fastcgi_pass</span>   127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:9000</span>;</span><br><span class="line">            <span class="selector-tag">fastcgi_read_timeout</span> 600;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;figure class=&quot;highlight css&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>Git 中永久删除某些文件（包括它们的历史记录）的办法</title>
    <link href="https://uames.github.io/2017/git/git%E5%88%A0%E9%99%A4%E6%96%87%E4%BB%B6%E5%8F%8A%E5%85%B6%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E7%9A%84%E6%96%B9%E6%B3%95/"/>
    <id>https://uames.github.io/2017/git/git删除文件及其历史记录的方法/</id>
    <published>2017-07-07T11:56:32.000Z</published>
    <updated>2018-01-15T08:33:00.926Z</updated>
    
    <content type="html"><![CDATA[<h2 id="Git-中永久删除某些文件（包括它们的历史记录）的办法-注意Windows下用双引号"><a href="#Git-中永久删除某些文件（包括它们的历史记录）的办法-注意Windows下用双引号" class="headerlink" title="Git 中永久删除某些文件（包括它们的历史记录）的办法 注意Windows下用双引号"></a>Git 中永久删除某些文件（包括它们的历史记录）的办法 注意Windows下用双引号</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">git filter-branch --index-filter &apos;git rm -r --cached --ignore-unmatch path/to/your/file&apos; HEAD</span><br><span class="line">git push origin master --force</span><br><span class="line">rm -rf .git/refs/original/</span><br><span class="line">git reflog expire --expire=now --all</span><br><span class="line">git gc --prune=now</span><br><span class="line">git gc --aggressive --prune=now</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;Git-中永久删除某些文件（包括它们的历史记录）的办法-注意Windows下用双引号&quot;&gt;&lt;a href=&quot;#Git-中永久删除某些文件（包括它们的历史记录）的办法-注意Windows下用双引号&quot; class=&quot;headerlink&quot; title=&quot;Git 中永久删
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>koa建站过程记录</title>
    <link href="https://uames.github.io/2017/koa%E5%BB%BA%E7%AB%99%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/"/>
    <id>https://uames.github.io/2017/koa建站过程记录/</id>
    <published>2017-06-29T11:41:10.000Z</published>
    <updated>2018-01-15T08:33:00.929Z</updated>
    
    <content type="html"><![CDATA[<h3 id="建数据库的同时设置字符编码为utf8"><a href="#建数据库的同时设置字符编码为utf8" class="headerlink" title="建数据库的同时设置字符编码为utf8:"></a>建数据库的同时设置字符编码为utf8:</h3><p><code>CREATE DATABASE shop CHARACTER SET utf8 COLLATE utf8_general_ci;</code></p><p><a href="#denglu">登录缓存</a></p><h3 id="建表的同时设置字符编码"><a href="#建表的同时设置字符编码" class="headerlink" title="建表的同时设置字符编码:"></a>建表的同时设置字符编码:</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> mytable(</span><br><span class="line"> <span class="keyword">id</span> <span class="built_in">varchar</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span>,</span><br><span class="line"> userId <span class="built_in">varchar</span>(<span class="number">40</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span> <span class="keyword">default</span> <span class="string">''</span></span><br><span class="line">) <span class="keyword">ENGINE</span>=<span class="keyword">InnoDB</span> <span class="keyword">DEFAULT</span> <span class="keyword">CHARSET</span>=utf8;</span><br></pre></td></tr></table></figure><h3 id="grant命令是创建MySQL的用户名和口令，均为www，并赋予操作test数据库的所有权限"><a href="#grant命令是创建MySQL的用户名和口令，均为www，并赋予操作test数据库的所有权限" class="headerlink" title="grant命令是创建MySQL的用户名和口令，均为www，并赋予操作test数据库的所有权限"></a>grant命令是创建MySQL的用户名和口令，均为www，并赋予操作test数据库的所有权限</h3><p><code>grant all privileges on test.* to &#39;www&#39;@&#39;%&#39; identified by &#39;www&#39;;</code></p><h3 id="runkoa-代码启动-在-bin-run-js-引入启动文件-bin-www-js-即可使得-babel-生效"><a href="#runkoa-代码启动-在-bin-run-js-引入启动文件-bin-www-js-即可使得-babel-生效" class="headerlink" title="runkoa 代码启动,在 ./bin/run.js , 引入启动文件 ./bin/www.js 即可使得 babel 生效"></a>runkoa 代码启动,在 ./bin/run.js , 引入启动文件 ./bin/www.js 即可使得 babel 生效</h3><h3 id="设计"><a href="#设计" class="headerlink" title="设计:"></a><span id="sheji">设计</span>:</h3><h4 id="models构建"><a href="#models构建" class="headerlink" title="models构建"></a>models构建</h4><p>在 utils/model 中有个 initTable 方法, 用于连接 utils/mysql 生成数据库表格, 并构建其 model 及其 CRUD 方法.<br>它会自动为调用该方法的 model 加上id(若不存在),createdAt, updatedAt 和 version 字段.</p><h4 id="routes构建"><a href="#routes构建" class="headerlink" title="routes构建"></a>routes构建</h4><p>在 utils/routes 中, 使用了声明式的方式, 自动 exports 路由对象, 在 app.js 中导入.<br>目前只实现了 /api/model/table 用于查看数据库表格字段. 如 /api/items/table 可以查看 items 表的字段.<br>使用扫描式会把 admin 这种不需要生成的表格也生成了, 可以使用排除式,但是不够直观!<br>考虑过加上自动生成 CRUD (post,get,put,delete) 路由, 但是由于定义复杂, 操作各个 model 所需判断条件有所不同,暂时放弃.</p><h4 id="登录缓存"><a href="#登录缓存" class="headerlink" title="登录缓存"></a><span id="denglu">登录缓存</span></h4><p>在 models/users 和 models/admin 中均有一个 IDS, 用于缓存已经登录的用户的数据, 避免每次验证登录状态,查询用户数据的时候都要到数据库中取.</p><h4 id="跨域设置"><a href="#跨域设置" class="headerlink" title="跨域设置"></a>跨域设置</h4><p>在 app.js 中, koa-cors 为借鉴了 node-cors 为 koa 专门开发的第三方插件, 可设置白名单.</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;建数据库的同时设置字符编码为utf8&quot;&gt;&lt;a href=&quot;#建数据库的同时设置字符编码为utf8&quot; class=&quot;headerlink&quot; title=&quot;建数据库的同时设置字符编码为utf8:&quot;&gt;&lt;/a&gt;建数据库的同时设置字符编码为utf8:&lt;/h3&gt;&lt;p&gt;&lt;cod
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>HTML5 Canvas推箱子小游戏DEMO演示</title>
    <link href="https://uames.github.io/2017/html/box-game/"/>
    <id>https://uames.github.io/2017/html/box-game/</id>
    <published>2017-06-07T11:47:29.000Z</published>
    <updated>2018-01-15T08:33:00.927Z</updated>
    
    <content type="html"><![CDATA[<div><!--身体-->  <div class="game"><canvas id="canvas" width="560" height="560"></canvas><div id="msg"></div><input type="button" value="上一关" onclick="_box.NextLevel(-1)"><input type="button" value="下一关" onclick="_box.NextLevel(1)"><input type="button" value="重玩本关" onclick="_box.NextLevel(0)"><input type="button" value="游戏说明" onclick="_box.showHelp()"></div>  <div style="text-align:center;clear:both"></div></div><script src="/js/game/box-game.js"></script>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;div&gt;&lt;!--身体--&gt;
  &lt;div class=&quot;game&quot;&gt;
		&lt;canvas id=&quot;canvas&quot; width=&quot;560&quot; height=&quot;560&quot;&gt;&lt;/canvas&gt;
		&lt;div id=&quot;msg&quot;&gt;&lt;/div&gt;
		&lt;input type=&quot;button&quot; 
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>jQuery可拖拽旋转的3D图片墙DEMO</title>
    <link href="https://uames.github.io/2017/html/drag-img-player/"/>
    <id>https://uames.github.io/2017/html/drag-img-player/</id>
    <published>2017-06-07T10:57:29.000Z</published>
    <updated>2018-01-15T08:33:00.928Z</updated>
    
    <content type="html"><![CDATA[<style type="text/css">.drage-player-pic{width: 120px;height: 180px;margin: 150px auto 0;position: relative;transform-style:preserve-3d;transform:perspective(800px) rotateX(-10deg) rotateY(0deg);}/*body{background-color: #66677c;}*/.drage-player-pic img{position: absolute;width: 100%;height: 100%;border-radius: 5px;box-shadow: 0px 0px 10px #fff;-webkit-box-reflect:below 10px -webkit-linear-gradient(top,rgba(0,0,0,0) 50%,rgba(0,0,0,.5) 100%);}.drage-player-pic p{width: 1200px;height: 1200px;background: -webkit-radial-gradient(center center,600px 600px,rgba(255,255,255,.5),rgba(0,0,0,0));position: absolute;top:100%;left:50%;margin-top: -600px;margin-left: -600px;border-radius:600px;transform:rotateX(90deg);}</style><div>  <div class="drage-player-pic">  <img src="/img/drag-play/1.jpg">  <img src="/img/drag-play/2.jpg">  <img src="/img/drag-play/3.jpg">  <img src="/img/drag-play/4.jpg">  <img src="/img/drag-play/5.jpg">  <img src="/img/drag-play/6.jpg">  <img src="/img/drag-play/7.jpg">  <img src="/img/drag-play/8.jpg">  <img src="/img/drag-play/9.jpg">  <img src="/img/drag-play/10.jpg">  <p></p>  </div></div><script src="/js/init.js"></script><script src="/js/animation/drag-img-player.js"></script>]]></content>
    
    <summary type="html">
    
      
      
        
&lt;style type=&quot;text/css&quot;&gt;
	.drage-player-pic{
		width: 120px;
		height: 180px;
		margin: 150px auto 0;
		position: relative;
		transform-styl
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>audio标签实现加载时呈现加载中状态，加载完毕改为播放状态并开始计时</title>
    <link href="https://uames.github.io/2017/javascript/audio%E6%A0%87%E7%AD%BE%E5%AE%9E%E7%8E%B0%E5%8A%A0%E8%BD%BD%E6%97%B6%E5%91%88%E7%8E%B0%E5%8A%A0%E8%BD%BD%E4%B8%AD%E7%8A%B6%E6%80%81%EF%BC%8C%E5%8A%A0%E8%BD%BD%E5%AE%8C%E6%AF%95%E6%94%B9%E4%B8%BA%E6%92%AD%E6%94%BE%E7%8A%B6%E6%80%81%E5%B9%B6%E5%BC%80%E5%A7%8B%E8%AE%A1%E6%97%B6/"/>
    <id>https://uames.github.io/2017/javascript/audio标签实现加载时呈现加载中状态，加载完毕改为播放状态并开始计时/</id>
    <published>2017-05-08T11:27:51.000Z</published>
    <updated>2018-01-15T08:33:00.928Z</updated>
    
    <content type="html"><![CDATA[<h4 id="点击播放的时候，立刻更改样式，呈现加载中样式"><a href="#点击播放的时候，立刻更改样式，呈现加载中样式" class="headerlink" title="点击播放的时候，立刻更改样式，呈现加载中样式"></a>点击播放的时候，立刻更改样式，呈现加载中样式</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">$(<span class="string">".speakContentBox"</span>).delegate(<span class="string">'.audio_info'</span>,<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> tmpSrc = app.playSrc;</span><br><span class="line">  app.playSrc = $(<span class="keyword">this</span>).attr(<span class="string">'attr-src'</span>);</span><br><span class="line"></span><br><span class="line">  app.playSecond = <span class="number">0</span>;</span><br><span class="line">  clearInterval(app.playIntervalId);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 判断播放的链接是否与正在播放的链接一致，一致则暂停播放，否则就替换链接然后开始播放。</span></span><br><span class="line">  <span class="keyword">if</span>(tmpSrc == app.playSrc)&#123;</span><br><span class="line">    app.playSrc = <span class="string">''</span>;</span><br><span class="line">    app.audioDom.pause();</span><br><span class="line">    <span class="comment">// 将上一个播放中的样式清除</span></span><br><span class="line">    app.playingDom.removeClass(<span class="string">'isPlaying isReading audioloading'</span>).addClass(<span class="string">'isReaded'</span>);</span><br><span class="line">  &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 替换链接然后开始播放。</span></span><br><span class="line">    $(<span class="string">"#audioPlayer"</span>).attr(<span class="string">'src'</span>, app.playSrc);</span><br><span class="line">    app.audioDom.play();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(app.playingDom)&#123;</span><br><span class="line">      <span class="comment">// 将上一个播放中的样式清除</span></span><br><span class="line">      app.playingDom.removeClass(<span class="string">'isPlaying isReading'</span>).addClass(<span class="string">'isReaded'</span>).find(<span class="string">".front-bar"</span>).css(<span class="string">'width'</span>, <span class="number">0</span>).next().css(<span class="string">'left'</span>,<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 保存正在呈现播放中状态的 dom 节点</span></span><br><span class="line">    app.playingDom = $(<span class="keyword">this</span>).parents(<span class="string">'.recordingMsg'</span>);</span><br><span class="line">    <span class="comment">// 呈现加载中样式</span></span><br><span class="line">    app.playingDom.addClass(<span class="string">'audioloading isPlaying isReading'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h4 id="监听加载完毕开始播放的事件，开始播放后，将加载中样式去掉，并改为播放中，然后开始倒计时。"><a href="#监听加载完毕开始播放的事件，开始播放后，将加载中样式去掉，并改为播放中，然后开始倒计时。" class="headerlink" title="监听加载完毕开始播放的事件，开始播放后，将加载中样式去掉，并改为播放中，然后开始倒计时。"></a>监听加载完毕开始播放的事件，开始播放后，将加载中样式去掉，并改为播放中，然后开始倒计时。</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">app.audioDom = <span class="built_in">document</span>.getElementById(<span class="string">'audioPlayer'</span>);</span><br><span class="line"><span class="comment">//</span></span><br><span class="line">app.playAudioFn = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  app.playingDom.removeClass(<span class="string">'audioloading'</span>).addClass(<span class="string">'isPlaying'</span>);</span><br><span class="line">  app.nowTotalSec = app.playingDom.find(<span class="string">'var'</span>).text();</span><br><span class="line">  app.playIntervalId = setInterval(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    app.playSecond++;</span><br><span class="line">    <span class="keyword">if</span>(app.playSecond &lt; app.nowTotalSec)&#123;</span><br><span class="line">      <span class="keyword">var</span> _w = app.playSecond / app.nowTotalSec * <span class="number">54</span> + <span class="string">'px'</span>;</span><br><span class="line">      app.playingDom.find(<span class="string">".front-bar"</span>).css(<span class="string">'width'</span>, _w).next().css(<span class="string">'left'</span>,_w);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      app.playSecond = <span class="number">0</span>;</span><br><span class="line">      clearInterval(app.playIntervalId);</span><br><span class="line">      app.playingDom.removeClass(<span class="string">'isPlaying isReading'</span>).addClass(<span class="string">'isReaded'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">997</span>);</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">// 监听加载完毕开始播放的事件</span></span><br><span class="line">app.audioDom.addEventListener(<span class="string">"canplaythrough"</span>, app.playAudioFn, <span class="literal">false</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;点击播放的时候，立刻更改样式，呈现加载中样式&quot;&gt;&lt;a href=&quot;#点击播放的时候，立刻更改样式，呈现加载中样式&quot; class=&quot;headerlink&quot; title=&quot;点击播放的时候，立刻更改样式，呈现加载中样式&quot;&gt;&lt;/a&gt;点击播放的时候，立刻更改样式，呈现加载中
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>纯css加载中动画</title>
    <link href="https://uames.github.io/2017/css/%E7%BA%AFcss%E5%8A%A0%E8%BD%BD%E4%B8%AD%E5%8A%A8%E7%94%BB/"/>
    <id>https://uames.github.io/2017/css/纯css加载中动画/</id>
    <published>2017-04-26T12:48:57.000Z</published>
    <updated>2018-01-15T08:33:00.925Z</updated>
    
    <content type="html"><![CDATA[<h3 id="html-代码："><a href="#html-代码：" class="headerlink" title="html 代码："></a>html 代码：</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"xesLoading"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"logoBox"</span>&gt;</span><span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>   <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>   <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>   <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span>   <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"xesName"</span>&gt;</span>加载中<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"xes_btn_RelLoad_box"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"reload_tips"</span>&gt;</span>卡住了？刷新一下～<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"xes_btn_RelLoad"</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">onclick</span>=<span class="string">"if(/\?/.test(window.location.href))window.location.href = (window.location.href).replace(/(\&amp;?)(restime\=)(\w+)/,'')+'&amp;restime='+new Date().getTime();else window.location.href = (window.location.href).replace(/(\&amp;?)(restime\=)(\w+)/,'')+'?restime='+new Date().getTime();"</span>&gt;</span>刷新<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="css-代码："><a href="#css-代码：" class="headerlink" title="css 代码："></a>css 代码：</h3><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*// 页面初始化时候的 loading  -- begin --*/</span></span><br><span class="line"><span class="selector-class">.xesLoading</span>, <span class="selector-tag">body</span>, <span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100%</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.reload_tips</span>, <span class="selector-class">.xesName</span>, <span class="selector-class">.xes_btn_RelLoad</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">text-align</span>:center</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">html</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">62.5%</span>;</span><br><span class="line">    <span class="attribute">background</span>:<span class="number">#eee</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>:<span class="number">1</span>;</span><br><span class="line">    <span class="attribute">font-family</span>:<span class="string">"Microsoft Yahei"</span>;</span><br><span class="line">    <span class="attribute">background-color</span>:<span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">color</span>:<span class="number">#5d5b5b</span>;</span><br><span class="line">    <span class="attribute">min-width</span>:<span class="number">320px</span>;</span><br><span class="line">    <span class="attribute">max-width</span>:<span class="number">640px</span>;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span> auto</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">list-style</span>:none;</span><br><span class="line">    <span class="attribute">padding</span>:<span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xesLoading</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">display</span>:block;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">z-index</span>:<span class="number">10</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">background</span>:<span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">overflow</span>:hidden</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">display</span>:block;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">100px</span>;</span><br><span class="line">    <span class="attribute">left</span>:<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">64px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">40px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>:<span class="number">#9CCC65</span>;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">32px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>:<span class="number">8px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.xesName</span> &#123;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">150px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>:<span class="number">1.5rem</span>;</span><br><span class="line">    <span class="attribute">color</span>:<span class="number">#a7a7a7</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">100%</span></span><br><span class="line">&#125;</span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> qlanime &#123;</span><br><span class="line">    0%, 100%, 85% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">5px</span></span><br><span class="line">    &#125;</span><br><span class="line">    40% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">15px</span></span><br><span class="line">    &#125;</span><br><span class="line">    80% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">14px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">7px</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">keyframes</span> qlanime &#123;</span><br><span class="line">    0%, 100%, 85% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">5px</span></span><br><span class="line">    &#125;</span><br><span class="line">    40% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">15px</span></span><br><span class="line">    &#125;</span><br><span class="line">    80% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">14px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">7px</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> qlanime1 &#123;</span><br><span class="line">    0%, 100%, 85% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">10px</span></span><br><span class="line">    &#125;</span><br><span class="line">    20% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">15px</span></span><br><span class="line">    &#125;</span><br><span class="line">    60% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">5px</span></span><br><span class="line">    &#125;</span><br><span class="line">    80% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">16px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">8px</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">keyframes</span> qlanime1 &#123;</span><br><span class="line">    0%, 100%, 85% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">10px</span></span><br><span class="line">    &#125;</span><br><span class="line">    20% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">15px</span></span><br><span class="line">    &#125;</span><br><span class="line">    60% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">5px</span></span><br><span class="line">    &#125;</span><br><span class="line">    80% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">16px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">8px</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@-<span class="keyword">webkit</span>-<span class="keyword">keyframes</span> qlanime2 &#123;</span><br><span class="line">    0%, 100%, 85% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">15px</span></span><br><span class="line">    &#125;</span><br><span class="line">    40% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">5px</span></span><br><span class="line">    &#125;</span><br><span class="line">    80% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">26px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">13px</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">@<span class="keyword">keyframes</span> qlanime2 &#123;</span><br><span class="line">    0%, 100%, 85% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">15px</span></span><br><span class="line">    &#125;</span><br><span class="line">    40% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">5px</span></span><br><span class="line">    &#125;</span><br><span class="line">    80% &#123;</span><br><span class="line">        <span class="attribute">height</span>:<span class="number">26px</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>:-<span class="number">13px</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>:inline-block;</span><br><span class="line">    <span class="attribute">position</span>:absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">right</span>:<span class="number">32px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>:<span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>:-<span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>:<span class="number">4px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>:<span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>:-<span class="number">5px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(2)</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>:<span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>:-<span class="number">10px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>:-<span class="number">2px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">30px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>:-<span class="number">15px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>:-<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>:-<span class="number">10px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(5)</span> &#123;</span><br><span class="line">    <span class="attribute">margin-right</span>:-<span class="number">18px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>:-<span class="number">5px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(1)</span>, <span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(5)</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>:qlanime .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite;</span><br><span class="line">    <span class="attribute">-moz-animation</span>:qlanime .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>:qlanime .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(2)</span>, <span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(4)</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>:qlanime1 .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite;</span><br><span class="line">    <span class="attribute">-moz-animation</span>:qlanime1 .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>:qlanime1 .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.logoBox</span> <span class="selector-tag">li</span><span class="selector-pseudo">:nth-child(3)</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>:qlanime2 .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite;</span><br><span class="line">    <span class="attribute">-moz-animation</span>:qlanime2 .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite;</span><br><span class="line">    <span class="attribute">-webkit-animation</span>:qlanime2 .<span class="number">7s</span> <span class="built_in">cubic-bezier</span>(.72, .41, .41, .68) .<span class="number">1s</span> alternate infinite</span><br><span class="line">&#125;</span><br><span class="line">  <span class="comment">/*// 卡住了 -- begin --*/</span></span><br><span class="line">  <span class="selector-id">#xes_btn_RelLoad_box</span> &#123;</span><br><span class="line">      <span class="attribute">display</span>:none</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.reload_tips</span> &#123;</span><br><span class="line">      <span class="attribute">top</span>:<span class="number">220px</span>;</span><br><span class="line">      <span class="attribute">font-size</span>:<span class="number">1.2rem</span>;</span><br><span class="line">      <span class="attribute">color</span>:<span class="number">#b4b4b4</span>;</span><br><span class="line">      <span class="attribute">width</span>:<span class="number">100%</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="selector-class">.xes_btn_RelLoad</span> &#123;</span><br><span class="line">      <span class="attribute">top</span>:<span class="number">260px</span>;</span><br><span class="line">      <span class="attribute">left</span>:<span class="number">50%</span>;</span><br><span class="line">      <span class="attribute">width</span>:<span class="number">60px</span>;</span><br><span class="line">      <span class="attribute">height</span>:<span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">margin-left</span>:-<span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">line-height</span>:<span class="number">30px</span>;</span><br><span class="line">      <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#e5e5e5</span>;</span><br><span class="line">      <span class="attribute">background</span>:<span class="number">#fff</span>;</span><br><span class="line">      <span class="attribute">color</span>:<span class="number">#9CCC65</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>:<span class="number">3px</span>;</span><br><span class="line">      <span class="attribute">font-size</span>:<span class="number">15px</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/*// 卡住了 -- end --*/</span></span><br><span class="line"><span class="comment">/*// 页面初始化时候的 loading  -- end --*/</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;html-代码：&quot;&gt;&lt;a href=&quot;#html-代码：&quot; class=&quot;headerlink&quot; title=&quot;html 代码：&quot;&gt;&lt;/a&gt;html 代码：&lt;/h3&gt;&lt;figure class=&quot;highlight html&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cla
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>异步加载js和css，加载成功后回调</title>
    <link href="https://uames.github.io/2017/javascript/%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BDjs%E5%92%8Ccss%EF%BC%8C%E5%8A%A0%E8%BD%BD%E6%88%90%E5%8A%9F%E5%90%8E%E5%9B%9E%E8%B0%83/"/>
    <id>https://uames.github.io/2017/javascript/异步加载js和css，加载成功后回调/</id>
    <published>2017-04-26T12:08:14.000Z</published>
    <updated>2018-01-15T08:33:00.929Z</updated>
    
    <content type="html"><![CDATA[<h3 id="异步加载JS后回调："><a href="#异步加载JS后回调：" class="headerlink" title="异步加载JS后回调："></a>异步加载JS后回调：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">app.dynamicLoadingJs = <span class="function"><span class="keyword">function</span> (<span class="params">e, d</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>);</span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</span><br><span class="line">    c.src = e;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> d === <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> a;</span><br><span class="line">        c.onload = c.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!a &amp;&amp; (!c.readyState || <span class="regexp">/loaded|complete/</span>.test(c.readyState))) &#123;</span><br><span class="line">                c.onload = c.onreadystatechange = <span class="literal">null</span>;</span><br><span class="line">                a = <span class="literal">true</span>;</span><br><span class="line">                d();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    b.appendChild(c);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><h3 id="异步加载CSS后回调："><a href="#异步加载CSS后回调：" class="headerlink" title="异步加载CSS后回调："></a>异步加载CSS后回调：</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">app.dynamicLoadingCss = <span class="function"><span class="keyword">function</span> (<span class="params">e, d</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> c = <span class="built_in">document</span>.createElement(<span class="string">"link"</span>);</span><br><span class="line">    <span class="keyword">var</span> b = <span class="built_in">document</span>.getElementsByTagName(<span class="string">"head"</span>)[<span class="number">0</span>];</span><br><span class="line">    c.href = e;</span><br><span class="line">    c.rel = <span class="string">"stylesheet"</span>;</span><br><span class="line">    c.type = <span class="string">"text/css"</span>;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> d === <span class="string">"function"</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> a;</span><br><span class="line">        c.onload = c.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (!a &amp;&amp; (!c.readyState || <span class="regexp">/loaded|complete/</span>.test(c.readyState))) &#123;</span><br><span class="line">                c.onload = c.onreadystatechange = <span class="literal">null</span>;</span><br><span class="line">                a = <span class="literal">true</span>;</span><br><span class="line">                d();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    b.appendChild(c);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;异步加载JS后回调：&quot;&gt;&lt;a href=&quot;#异步加载JS后回调：&quot; class=&quot;headerlink&quot; title=&quot;异步加载JS后回调：&quot;&gt;&lt;/a&gt;异步加载JS后回调：&lt;/h3&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;tab
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>分享XX-Net的局域网共享代理方法 （安卓手机/局域网内其他电脑）</title>
    <link href="https://uames.github.io/2017/%E5%88%86%E4%BA%ABXX-Net%E7%9A%84%E5%B1%80%E5%9F%9F%E7%BD%91%E5%85%B1%E4%BA%AB%E4%BB%A3%E7%90%86%E6%96%B9%E6%B3%95/"/>
    <id>https://uames.github.io/2017/分享XX-Net的局域网共享代理方法/</id>
    <published>2017-02-17T11:07:30.000Z</published>
    <updated>2018-01-15T08:33:00.931Z</updated>
    
    <content type="html"><![CDATA[<p>一.电脑端操作<br>1.在XXnet/data/gae_proxy目录下修改config.ini  将127.0.0.1改为0.0.0.0（这样设置本地+局域网都有效）</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[pac]</span><br><span class="line">enable = <span class="number">1</span></span><br><span class="line">ip = <span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">port = <span class="number">8086</span></span><br><span class="line">file = proxy.pac</span><br><span class="line">gfwlist = https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt</span><br><span class="line">;adblock = http://adblock-chinalist.googlecode.com/svn/trunk/adblock.txt</span><br><span class="line">; this project have stopped.</span><br><span class="line">expired = <span class="number">86400</span></span><br><span class="line">[listen]</span><br><span class="line">ip = <span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span>.<span class="number">0</span></span><br><span class="line">port = <span class="number">8087</span></span><br><span class="line">visible = <span class="number">1</span></span><br><span class="line">debuginfo = <span class="number">0</span></span><br></pre></td></tr></table></figure><p>2.重启XX-Net，确认本地仍可正常翻墙。</p><p>二.局域网内其他电脑<br>1.Win+R输入cmd回车，输入ipconfig，获取到本机IPv4地址192.x.x.x</p><p>2.局域网内其他主机，IE–Internet设置–连接–代理服务器，设为刚查到的192.x.x.x 端口8087。Chrome等浏览器在插件如switchy sharp里同样设置即可。</p><p>三.局域网手机端</p><p>方法一：将XX-Net-2.5.5\data\gae_proxy下的CA.crt复制到手机sd卡。打开设置-安全-存储凭证-从sd卡安装，安装ca.crt 。重启手机</p><p>方法二：若方法一无发安装，打开网址 <a href="http://www.realmb.com/droidCert/" target="_blank" rel="noopener">http://www.realmb.com/droidCert/</a>   将XX-Net\data\gae_proxy\CA.crt证书上传，得到一个链接，手机访问可以直接安装证书（安装选择类型WLAN），感谢RealmB！</p><p>3.打开设置-wifi-你连接的wifi，把代理改成手动，主机名填你的静态ip，端口填8087</p><p>4.这时你的手机应该也能够通过XX-Net翻墙了！</p><p>注意：电脑关机后需将手机的代理调回无，才能正常上网（无翻墙）</p><p><a href="https://groups.google.com/forum/#!searchin/xx-net/代理/xx-net/mZljXXRwL-4/RabQ3KEmAgAJ" target="_blank" rel="noopener">转于Google论坛</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;一.电脑端操作&lt;br&gt;1.在XXnet/data/gae_proxy目录下修改config.ini  将127.0.0.1改为0.0.0.0（这样设置本地+局域网都有效）&lt;/p&gt;
&lt;figure class=&quot;highlight cmd&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td cl
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>关于折叠自行车的一点知识</title>
    <link href="https://uames.github.io/2016/%E5%85%B3%E4%BA%8E%E6%8A%98%E5%8F%A0%E8%87%AA%E8%A1%8C%E8%BD%A6%E7%9A%84%E4%B8%80%E7%82%B9%E7%9F%A5%E8%AF%86/"/>
    <id>https://uames.github.io/2016/关于折叠自行车的一点知识/</id>
    <published>2016-07-29T11:12:39.000Z</published>
    <updated>2018-01-15T08:33:00.930Z</updated>
    
    <content type="html"><![CDATA[<h3 id="型号解读"><a href="#型号解读" class="headerlink" title="型号解读"></a>型号解读</h3><p>型号一般为3位字母+3位数字，如KAC083，字母前2位代表款式，如KA，代表KA型架，第3位字母代表材质，A为铝合金，C为铬钼钢，T为高碳钢等；后3位083数字，第1位代表轮胎尺寸，请注意，这里的寸是英寸，如0代表20寸，6代表16寸，4代表14寸，第2位数字代表变速，6表示6速，8表示8速或18速，最后1位数字，代表折叠车等级，一共分0-5等级。如BYA412是BY型铝合金车架14寸1速2等级车，KAA083是KA型铝合金车架20寸18速3等级车</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;型号解读&quot;&gt;&lt;a href=&quot;#型号解读&quot; class=&quot;headerlink&quot; title=&quot;型号解读&quot;&gt;&lt;/a&gt;型号解读&lt;/h3&gt;&lt;p&gt;型号一般为3位字母+3位数字，如KAC083，字母前2位代表款式，如KA，代表KA型架，第3位字母代表材质，A为铝合金，C为
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>关于跨域的一些记录</title>
    <link href="https://uames.github.io/2016/%E5%85%B3%E4%BA%8E%E8%B7%A8%E5%9F%9F%E7%9A%84%E4%B8%80%E4%BA%9B%E8%AE%B0%E5%BD%95/"/>
    <id>https://uames.github.io/2016/关于跨域的一些记录/</id>
    <published>2016-07-22T10:47:29.000Z</published>
    <updated>2018-01-15T08:33:00.930Z</updated>
    
    <content type="html"><![CDATA[<p>cors跨域，同时设置了可传输cookie <code>header(&quot;Access-Control-Allow-Credentials:true&quot;);</code>，<br>那么浏览器只允许 <code>header(&quot;Access-Control-Allow-Origin:&quot;.$origin);</code> 设置一个domain，并且不能用”*”，<br>这时候，获取访问的 HTTP_ORIGIN 用于判断，并动态地返回 Access-Control-Allow-Origin 的值，<br>就可以使用多个域名跨域啦，下面是代码：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> function <span class="title">__construct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  $origin = $_SERVER[<span class="string">'HTTP_ORIGIN'</span>];</span><br><span class="line">  <span class="keyword">if</span>(strpos(G::$CORS_HOST,$origin)!==<span class="keyword">false</span> || G::$CORS_HOST==<span class="string">'*'</span>)&#123;</span><br><span class="line">    header(<span class="string">"Access-Control-Allow-Origin:"</span>.$origin);</span><br><span class="line">  &#125;</span><br><span class="line">  header(<span class="string">"Access-Control-Allow-Credentials:true"</span>);</span><br><span class="line">  header(<span class="string">"Access-Control-Allow-Methods:DELETE,GET,POST,PUT,OPTIONS"</span>);</span><br><span class="line">  header(<span class="string">"Access-Control-Allow-Headers:x-requested-with,content-type"</span>);</span><br><span class="line">  header(<span class="string">"Access-Control-Max-Age:1728000"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;cors跨域，同时设置了可传输cookie &lt;code&gt;header(&amp;quot;Access-Control-Allow-Credentials:true&amp;quot;);&lt;/code&gt;，&lt;br&gt;那么浏览器只允许 &lt;code&gt;header(&amp;quot;Access-Cont
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>gulp使用记录</title>
    <link href="https://uames.github.io/2016/gulp/gulp%E4%BD%BF%E7%94%A8%E8%AE%B0%E5%BD%95/"/>
    <id>https://uames.github.io/2016/gulp/gulp使用记录/</id>
    <published>2016-07-22T10:43:14.000Z</published>
    <updated>2018-01-15T08:33:00.927Z</updated>
    
    <content type="html"><![CDATA[<h3 id="gulpfile-js"><a href="#gulpfile-js" class="headerlink" title="gulpfile.js"></a>gulpfile.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 引入 gulp</span></span><br><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>),</span><br><span class="line">  jshint = <span class="built_in">require</span>(<span class="string">'gulp-jshint'</span>)</span><br><span class="line">  uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>),</span><br><span class="line">  sass = <span class="built_in">require</span>(<span class="string">'gulp-sass'</span>),</span><br><span class="line">  minifyCss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>),</span><br><span class="line">  imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>),</span><br><span class="line">  watchPath = <span class="built_in">require</span>(<span class="string">'gulp-watch-path'</span>),</span><br><span class="line">  notify = <span class="built_in">require</span>(<span class="string">"gulp-notify"</span>),</span><br><span class="line">  browserSync = <span class="built_in">require</span>(<span class="string">'browser-sync'</span>).create(),</span><br><span class="line">  reload = browserSync.reload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> handleErrors = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> args = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>);</span><br><span class="line">  <span class="comment">// console.log(JSON.stringify(arguments));</span></span><br><span class="line">  notify.onError(&#123;</span><br><span class="line">    title: <span class="string">'compile error'</span>,</span><br><span class="line">    message: <span class="string">'&lt;%=error.message %&gt;, at line : &lt;%=error.lineNumber %&gt;'</span></span><br><span class="line">  &#125;).apply(<span class="keyword">this</span>, args);<span class="comment">//替换为当前对象</span></span><br><span class="line">  <span class="keyword">this</span>.emit();<span class="comment">//提交</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 压缩js文件</span></span><br><span class="line">gulp.task(<span class="string">'script'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/js/**/*.js'</span>)</span><br><span class="line">        .pipe(jshint())</span><br><span class="line">        .pipe(jshint.reporter(<span class="string">'default'</span>))</span><br><span class="line">        .pipe(uglify())</span><br><span class="line">        .on(<span class="string">'error'</span>, handleErrors)</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'app/js'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 编译scss或sass文件</span></span><br><span class="line">gulp.task(<span class="string">'sass'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/scss/**/*'</span>)</span><br><span class="line">        .pipe(minifyCss())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'app/css'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩css文件</span></span><br><span class="line">gulp.task(<span class="string">'css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/css/**/*.css'</span>)</span><br><span class="line">        .pipe(minifyCss())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'app/css'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩img文件</span></span><br><span class="line">gulp.task(<span class="string">'img'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'src/img/**/*.*'</span>)</span><br><span class="line">        .pipe(imagemin())</span><br><span class="line">        .on(<span class="string">'error'</span>, handleErrors)</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'app/img'</span>));</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'minAll'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    gulp.run(<span class="string">'script'</span>, <span class="string">'css'</span>, <span class="string">'img'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听js文件的变化，压缩有变化的文件</span></span><br><span class="line">gulp.task(<span class="string">'watchJs'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> src = <span class="string">'src/js/**/'</span>;</span><br><span class="line">  gulp.watch(src + <span class="string">'*'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> paths = watchPath(event , src , <span class="string">'app/js/'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(paths.srcFilename + <span class="string">' has '</span> + event.type);</span><br><span class="line">    <span class="keyword">if</span>(paths.srcFilename.indexOf(<span class="string">'.js'</span>)&gt;<span class="number">-1</span>)&#123;</span><br><span class="line">      gulp.src(src + paths.srcFilename)</span><br><span class="line">          .pipe(jshint())</span><br><span class="line">          .pipe(jshint.reporter(<span class="string">'default'</span>))</span><br><span class="line">          .pipe(uglify())</span><br><span class="line">          .on(<span class="string">'error'</span>, handleErrors)</span><br><span class="line">          .pipe(gulp.dest(<span class="string">'app/js/'</span>)).on(<span class="string">'change'</span>, reload);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'watchSass'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> src = <span class="string">'src/scss/**/'</span>;</span><br><span class="line">  gulp.watch(src + <span class="string">'*'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> paths = watchPath(event , src , <span class="string">'app/css/'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(paths.srcFilename + <span class="string">' has '</span> + event.type);</span><br><span class="line">    <span class="keyword">if</span>(paths.srcFilename.indexOf(<span class="string">'.scss'</span>)&gt;<span class="number">-1</span> || paths.srcFilename.indexOf(<span class="string">'.sass'</span>)&gt;<span class="number">-1</span>)&#123;</span><br><span class="line">      gulp.src(<span class="string">'src/scss/**/'</span> + paths.srcFilename)</span><br><span class="line">          .pipe(sass())</span><br><span class="line">          .on(<span class="string">'error'</span>, handleErrors)</span><br><span class="line">          .pipe(minifyCss())</span><br><span class="line">          .pipe(gulp.dest(<span class="string">'app/css/'</span>))</span><br><span class="line">          .pipe(reload(&#123;<span class="attr">stream</span>: <span class="literal">true</span>&#125;));</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'watchHtml'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  gulp.watch([</span><br><span class="line">    <span class="string">'./*.html'</span>,</span><br><span class="line">    <span class="string">'bdshop/*'</span>,</span><br><span class="line">    <span class="string">'login/*'</span>,</span><br><span class="line">    <span class="string">'public/*'</span>,</span><br><span class="line">    <span class="string">'share/*'</span>,</span><br><span class="line">    <span class="string">'subscribe/*'</span>]).on(<span class="string">'change'</span>, reload);</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'watch'</span>, [<span class="string">'watchHtml'</span>,<span class="string">'watchSass'</span>,<span class="string">'watchJs'</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    browserSync.init(&#123;</span><br><span class="line">      proxy: <span class="string">"http://a.easy.com/"</span>,</span><br><span class="line">      port: <span class="number">801</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h3 id="package-json"><a href="#package-json" class="headerlink" title="package.json"></a>package.json</h3><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"name"</span>: <span class="string">"angular-project"</span>,</span><br><span class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="attr">"description"</span>: <span class="string">"a angular project pack gulp's file"</span>,</span><br><span class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="attr">"keywords"</span>: [],</span><br><span class="line">  <span class="attr">"author"</span>: <span class="string">"Jim"</span>,</span><br><span class="line">  <span class="attr">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="attr">"browser-sync"</span>: <span class="string">"^2.13.0"</span>,</span><br><span class="line">    <span class="attr">"gulp"</span>: <span class="string">"^3.9.1"</span>,</span><br><span class="line">    <span class="attr">"gulp-imagemin"</span>: <span class="string">"^3.0.2"</span>,</span><br><span class="line">    <span class="attr">"gulp-jshint"</span>: <span class="string">"^2.0.1"</span>,</span><br><span class="line">    <span class="attr">"gulp-livereload"</span>: <span class="string">"^3.8.1"</span>,</span><br><span class="line">    <span class="attr">"gulp-minify-css"</span>: <span class="string">"^1.2.4"</span>,</span><br><span class="line">    <span class="attr">"gulp-notify"</span>: <span class="string">"^2.2.0"</span>,</span><br><span class="line">    <span class="attr">"gulp-sass"</span>: <span class="string">"^2.3.2"</span>,</span><br><span class="line">    <span class="attr">"gulp-uglify"</span>: <span class="string">"^1.5.4"</span>,</span><br><span class="line">    <span class="attr">"gulp-watch-path"</span>: <span class="string">"^0.1.0"</span>,</span><br><span class="line">    <span class="attr">"jshint"</span>: <span class="string">"^2.9.2"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;gulpfile-js&quot;&gt;&lt;a href=&quot;#gulpfile-js&quot; class=&quot;headerlink&quot; title=&quot;gulpfile.js&quot;&gt;&lt;/a&gt;gulpfile.js&lt;/h3&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>mui框架之弹出选择器(地址三级联动)</title>
    <link href="https://uames.github.io/2016/2016-06-19-mui-nstruction/"/>
    <id>https://uames.github.io/2016/2016-06-19-mui-nstruction/</id>
    <published>2016-07-12T12:41:58.000Z</published>
    <updated>2018-01-15T08:33:00.922Z</updated>
    
    <content type="html"><![CDATA[<p>mui项目<a href="https://github.com/dcloudio/mui" target="_blank" rel="noopener">github地址</a><br>mui首页<a href="http://dev.dcloud.net.cn/mui/" target="_blank" rel="noopener">官方地址</a></p><p>页面中需导入以下文件：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"__PUBLIC__/css/mui.min.css"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"__PUBLIC__/js/list/mui.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 下面两个文件为选择器专用 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"__PUBLIC__/js/list/mui.picker.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"__PUBLIC__/js/list/mui.poppicker.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p><code>mui.picker.js</code>和<code>mui.poppicker.js</code>已作为mui单独的插件发布，这是<a href="https://github.com/dcloudio/mui/tree/master/plugin/picker" target="_blank" rel="noopener">地址</a></p><h6 id="下面是进行地址三级联动选择，或者单级列表选择时的代码示例"><a href="#下面是进行地址三级联动选择，或者单级列表选择时的代码示例" class="headerlink" title="下面是进行地址三级联动选择，或者单级列表选择时的代码示例"></a>下面是进行地址三级联动选择，或者单级列表选择时的代码示例</h6><p>更多示例，请下载github上面的项目，在example文件夹中有具体示例代码~</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//三级联动</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$, doc</span>) </span>&#123;</span><br><span class="line">  $.init();</span><br><span class="line">  $.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//级联示例</span></span><br><span class="line">    <span class="keyword">var</span> cityPicker3 = <span class="keyword">new</span> $.PopPicker(&#123;</span><br><span class="line">      layer: <span class="number">3</span></span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">var</span> cityPicker2 = <span class="keyword">new</span> $.PopPicker(&#123;</span><br><span class="line">      layer: <span class="number">1</span></span><br><span class="line">    &#125;);</span><br><span class="line">    streetData =<span class="string">""</span>,tempArr=<span class="string">''</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> proData =<span class="string">""</span>;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">      url: (<span class="string">'/main/base/getAddress?'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()),</span><br><span class="line">      data:&#123;<span class="attr">pid</span>:<span class="string">"0"</span>&#125;,</span><br><span class="line">      type: <span class="string">"POST"</span>,</span><br><span class="line">      dataType:<span class="string">'json'</span>,</span><br><span class="line">      <span class="keyword">async</span>:<span class="literal">false</span>,</span><br><span class="line">      success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        proData = data;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    cityPicker3.setData(proData);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> showCityPickerButton = doc.getElementById(<span class="string">'showCityPicker3'</span>);</span><br><span class="line">    showCityPickerButton.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      cityPicker3.show(<span class="function"><span class="keyword">function</span>(<span class="params">items</span>) </span>&#123;</span><br><span class="line">        showCityPickerButton.value =(items[<span class="number">0</span>] || &#123;&#125;).text + <span class="string">" "</span> + (items[<span class="number">1</span>] || &#123;&#125;).text + <span class="string">" "</span> + (items[<span class="number">2</span>] || &#123;&#125;).text;</span><br><span class="line">        tempArr[<span class="number">0</span>] = items[<span class="number">0</span>].id;</span><br><span class="line">        tempArr[<span class="number">1</span>] = items[<span class="number">1</span>].id;</span><br><span class="line">        tempArr[<span class="number">2</span>] = items[<span class="number">2</span>].id;</span><br><span class="line">        showCityPickerButton.dataset.cityid =items[<span class="number">2</span>].id;</span><br><span class="line">        <span class="comment">//返回 false 可以阻止选择框的关闭</span></span><br><span class="line">        <span class="keyword">if</span>(items[<span class="number">2</span>].id &gt; <span class="number">0</span>)&#123;</span><br><span class="line">          $.ajax(&#123;</span><br><span class="line">            url: (<span class="string">'/main/base/getAddress?'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()),</span><br><span class="line">            data:&#123;<span class="attr">pid</span>:items[<span class="number">2</span>].id&#125;,</span><br><span class="line">            type: <span class="string">"POST"</span>,</span><br><span class="line">            dataType:<span class="string">'json'</span>,</span><br><span class="line">            <span class="keyword">async</span>:<span class="literal">false</span>,</span><br><span class="line">            success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">              <span class="comment">//streetData = data;</span></span><br><span class="line">              cityPicker2.setData(data);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="literal">false</span>);</span><br><span class="line">    cityPicker2.setData(streetData);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)(mui, <span class="built_in">document</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//单级列表</span></span><br><span class="line">(<span class="function"><span class="keyword">function</span>(<span class="params">$, doc</span>) </span>&#123;</span><br><span class="line">  $.init();</span><br><span class="line">  $.ready(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//级联示例</span></span><br><span class="line">    <span class="keyword">var</span> levelPicker = <span class="keyword">new</span> $.PopPicker(&#123;</span><br><span class="line">      layer: <span class="number">1</span></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> aData =[];</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">      url: (<span class="string">'/main/memberCard/getMemberCardLevel?'</span> + <span class="keyword">new</span> <span class="built_in">Date</span>().getTime()),</span><br><span class="line">      type: <span class="string">"GET"</span>,</span><br><span class="line">      dataType:<span class="string">'json'</span>,</span><br><span class="line">      <span class="keyword">async</span>:<span class="literal">false</span>,</span><br><span class="line">      success:<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(data.code==<span class="number">1</span>)&#123;</span><br><span class="line">          <span class="keyword">var</span> len = data.data.length;</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>; i&lt;len; i++)&#123;</span><br><span class="line">            data.data[i].text = data.data[i].name;</span><br><span class="line">          &#125;</span><br><span class="line">          aData = data.data;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    levelPicker.setData(aData);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> showLevelPickerButton = doc.getElementById(<span class="string">'chooseLevel'</span>);</span><br><span class="line">    showLevelPickerButton.addEventListener(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event</span>) </span>&#123;</span><br><span class="line">      levelPicker.show(<span class="function"><span class="keyword">function</span>(<span class="params">items</span>) </span>&#123;</span><br><span class="line">        showLevelPickerButton.value =(items[<span class="number">0</span>] || &#123;&#125;).text;</span><br><span class="line">        showLevelPickerButton.setAttribute(<span class="string">"data-id"</span>, items[<span class="number">0</span>].id);</span><br><span class="line">        <span class="comment">//返回 false 可以阻止选择框的关闭</span></span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;, <span class="literal">false</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;)(mui, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;mui项目&lt;a href=&quot;https://github.com/dcloudio/mui&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;github地址&lt;/a&gt;&lt;br&gt;mui首页&lt;a href=&quot;http://dev.dcloud.net.cn/mui/
      
    
    </summary>
    
      <category term="UAMES update" scheme="https://uames.github.io/categories/UAMES-update/"/>
    
    
  </entry>
  
  <entry>
    <title>使用$emit, $broadcast和$on在父级和子级controller间传递数据</title>
    <link href="https://uames.github.io/2016/angular/2016-06-25-%E4%BD%BF%E7%94%A8$emit,%20$broadcast%E5%92%8C$on%E5%9C%A8%E7%88%B6%E7%BA%A7%E5%92%8C%E5%AD%90%E7%BA%A7controller%E9%97%B4%E4%BC%A0%E9%80%92%E6%95%B0%E6%8D%AE/"/>
    <id>https://uames.github.io/2016/angular/2016-06-25-使用$emit, $broadcast和$on在父级和子级controller间传递数据/</id>
    <published>2016-07-12T11:41:58.000Z</published>
    <updated>2018-01-15T08:33:00.924Z</updated>
    
    <content type="html"><![CDATA[<p>使用$emit, $broadcast和$on在父级和子级controller间传递数据</p><blockquote><p>AngularJS中的作用域有一个非常有层次和嵌套分明的结构。其中它们都有一个主要的$rootScope(也就说对应的Angular应用或者ng-app)，然后其他所有的作用域部分都是继承自这个$rootScope的，或者说都是嵌套在主作用域下面的。很多时候，你会发现这些作用域不会共享变量或者说都不会从另一个原型继承什么。</p><p>那么在这种情况下，如何在作用域之间通信呢？其中一个选择就是在应用程序作用域之中创建一个单例服务，然后通过这个服务处理所有子作用域的通信。</p><p>在AngularJS中还有另外一个选择：通过作用域中的事件处理通信。但是这种方法有一些限制；例如，你并不能广泛的将事件传播到所有监控的作用域中。你必须选择是否与父级作用域或者子作用域通信。</p></blockquote><p>$on、$emit和$broadcast使得event、data在controller之间的传递变的简单。  </p><ul><li>$emit只能向parent controller传递event与data  </li><li>$broadcast只能向child controller传递event与data  </li><li>$on用于接收event与data  </li></ul><p>例子如下</p><p>html代码  </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"ParentCtrl"</span>&gt;</span>                <span class="comment">&lt;!--父级--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"SelfCtrl"</span>&gt;</span>              <span class="comment">&lt;!--自己--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">ng-click</span>=<span class="string">"click()"</span>&gt;</span>click me<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"ChildCtrl"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>   <span class="comment">&lt;!--子级--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-controller</span>=<span class="string">"BroCtrl"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>         <span class="comment">&lt;!--平级--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>js代码</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">app.controller(<span class="string">'SelfCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">    $scope.click = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $scope.$broadcast(<span class="string">'to-child'</span>, <span class="string">'child'</span>);</span><br><span class="line">        $scope.$emit(<span class="string">'to-parent'</span>, <span class="string">'parent'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.controller(<span class="string">'ParentCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>) </span>&#123;</span><br><span class="line">    $scope.$on(<span class="string">'to-parent'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event,data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ParentCtrl'</span>, data);       <span class="comment">//父级能得到值</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $scope.$on(<span class="string">'to-child'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event,data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ParentCtrl'</span>, data);       <span class="comment">//子级得不到值</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.controller(<span class="string">'ChildCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;</span><br><span class="line">    $scope.$on(<span class="string">'to-child'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event,data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ChildCtrl'</span>, data);         <span class="comment">//子级能得到值</span></span><br><span class="line">    &#125;);</span><br><span class="line">    $scope.$on(<span class="string">'to-parent'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event,data</span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'ChildCtrl'</span>, data);         <span class="comment">//父级得不到值</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">app.controller(<span class="string">'BroCtrl'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$scope</span>)</span>&#123;  </span><br><span class="line">    $scope.$on(<span class="string">'to-parent'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event,data</span>) </span>&#123;  </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'BroCtrl'</span>, data);          <span class="comment">//平级得不到值  </span></span><br><span class="line">    &#125;);  </span><br><span class="line">    $scope.$on(<span class="string">'to-child'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">event,data</span>) </span>&#123;  </span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'BroCtrl'</span>, data);          <span class="comment">//平级得不到值  </span></span><br><span class="line">    &#125;);  </span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>最终结果</p><p>ParentCtrl parent</p><p>ChildCtrl child</p><p>$emit和$broadcast可以传多个参数，$on也可以接收多个参数。<br>在$on的方法中的event事件参数，其对象的属性和方法如下  </p><table><thead><tr><th>事件属性</th><th style="text-align:center">目的</th></tr></thead><tbody><tr><td>event.targetScope</td><td style="text-align:center">发出或者传播原始事件的作用域</td></tr><tr><td>event.currentScope</td><td style="text-align:center">目前正在处理的事件的作用域</td></tr><tr><td>event.name</td><td style="text-align:center">事件名称</td></tr><tr><td>event.stopPropagation()</td><td style="text-align:center">一个防止事件进一步传播(冒泡/捕获)的函数(这只适用于使用<code>$emit</code>发出的事件)</td></tr><tr><td>event.preventDefault()    这个方法实际上不会做什么事，但是会设置<code>defaultPrevented</code>为true</td><td style="text-align:center">event.preventDefault()    这个方法实际上不会做什么事，但是会设置<code>defaultPrevented</code>为true。直到事件监听器的实现者采取行动之前它才会检查<code>defaultPrevented</code>的值</td></tr><tr><td>event.defaultPrevented</td><td style="text-align:center">如果调用了<code>preventDefault</code>则为true</td></tr></tbody></table><p>service在不同controller中通信要方便许多~~</p><p>转于<a href="http://www.cnblogs.com/CraryPrimitiveMan/p/3679552.html" target="_blank" rel="noopener">博客园</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;使用$emit, $broadcast和$on在父级和子级controller间传递数据&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;AngularJS中的作用域有一个非常有层次和嵌套分明的结构。其中它们都有一个主要的$rootScope(也就说对应的Angular应用或者ng
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>Python扫描并复制文件，读取文件列表复制文件</title>
    <link href="https://uames.github.io/2016/2016-06-19-Python%E6%89%AB%E6%8F%8F%E5%B9%B6%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6-%E8%AF%BB%E5%8F%96%E6%96%87%E4%BB%B6%E5%88%97%E8%A1%A8%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6/"/>
    <id>https://uames.github.io/2016/2016-06-19-Python扫描并复制文件-读取文件列表复制文件/</id>
    <published>2016-06-19T11:49:36.000Z</published>
    <updated>2018-01-15T08:33:00.922Z</updated>
    
    <content type="html"><![CDATA[<p>因为项目需要，我负责上传文件，昨天整理了一些文件，但是今天又改了下，不想手动一个个复制，于是想用程序解决，从cmd到shell到java，突然想到python应该会有这种小程序，上网搜了下，果然有，“Python扫描并复制文件”。拿来用了下，修了点不适合我环境的bug，然后程序成功运行了，文件也copy过去了。</p><p>然后还有个需求，我这边上传文件，同事只是发个文件的相对地址给我，我还是得手动copy，于是修改代码，最后出来的结果是这样的，之前的功能还保留了，用参数控制不同的功能。</p><p>代码使用方法已经放在文件头部了。这是我第一次折腾python的代码，之前的经验只是从github上下了个项目pyrailgun，运行里面的demo学习了下。那是个爬虫插件。</p><p>总之，感觉还是挺好玩的，有空的话，我还想用nodejs把这个功能实现一下～</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"># 第一种用法（替换已经复制了的文件），配置好下面要扫描替换的目录，直接运行 python copyNewToDest.py</span><br><span class="line"># 第二种用法（直接复制文件），配置好SOURCE_PATH2（源目录）和DEST_PATH（目标目录），</span><br><span class="line">#运行 python copyNewToDest.py copyMobile, copyMobile中放目录中要copy的文件路径，多个文件换行即可</span><br><span class="line">#除了Application和Public文件夹，其它均需要正确的相对路径</span><br><span class="line"># 第三种用法（配置多个copy目录），配置好对应条件后的代码，运行python copyNewToDest.py copyEasy easy, 最后一个参数值easy代表不同的项目</span><br><span class="line">import os</span><br><span class="line">import shutil</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line">SOURCE_PATH1=r&apos;C:\Users\jim\Desktop\tzb_mobile\0-wait-to-online&apos;;#比对目录，提供文件名</span><br><span class="line">SOURCE_PATH2=r&apos;D:\wamp\apps\mobile&apos;;#要复制出来的目录 D:\wamp\apps\mobile</span><br><span class="line">DEST_PATH=r&apos;C:\Users\jim\Desktop\tzb_mobile\0-wait-to-online&apos;#目标目录</span><br><span class="line"></span><br><span class="line">if len(sys.argv)==3 and sys.argv[2]==&apos;easy&apos;:</span><br><span class="line">SOURCE_PATH1=r&apos;C:\Users\jim\Desktop\tzb_easypro\0-wait-to-online&apos;;#比对目录，提供文件名</span><br><span class="line">SOURCE_PATH2=r&apos;D:\wamp\apps\tzb_easy&apos;;#要复制出来的目录 D:\wamp\apps\mobile</span><br><span class="line">DEST_PATH=r&apos;C:\Users\jim\Desktop\tzb_easypro\0-wait-to-online&apos;#目标目录</span><br><span class="line"></span><br><span class="line">def ReadFileNames(rootDir):</span><br><span class="line">    FileList = []</span><br><span class="line">    for parent,dirNames,fileNames in os.walk(rootDir):</span><br><span class="line">        if fileNames:</span><br><span class="line">            for fileName in fileNames:</span><br><span class="line">                FileList.append(os.path.join(parent,fileName))</span><br><span class="line">    return FileList</span><br><span class="line"></span><br><span class="line">#搜索字符串中所有的子字符串，暂未用到</span><br><span class="line">def SearchStr(str,search):</span><br><span class="line">start = 0</span><br><span class="line">while True:</span><br><span class="line">index = str.find(search, start)</span><br><span class="line"># if search string not found, find() returns -1</span><br><span class="line"># search is complete, break out of the while loop</span><br><span class="line">if index == -1:</span><br><span class="line">break</span><br><span class="line">print( &quot;%s found at index %d&quot; % (search, index) )</span><br><span class="line"># move to next possible start position</span><br><span class="line">start = index + 1</span><br><span class="line"></span><br><span class="line">#main()</span><br><span class="line">if len(sys.argv)==1:</span><br><span class="line">print sys.argv[0]</span><br><span class="line">if __name__==&apos;__main__&apos;:</span><br><span class="line">if not os.path.exists(DEST_PATH):</span><br><span class="line">os.makedirs(DEST_PATH)</span><br><span class="line">fileList = ReadFileNames(SOURCE_PATH1)</span><br><span class="line">for oldfileName in fileList:</span><br><span class="line">print oldfileName</span><br><span class="line">newfileName = oldfileName.replace(SOURCE_PATH1, SOURCE_PATH2)</span><br><span class="line">destfileName = oldfileName.replace(SOURCE_PATH1, DEST_PATH)</span><br><span class="line">destdirName =  os.path.dirname(destfileName)</span><br><span class="line">if not os.path.exists(destdirName):</span><br><span class="line">os.makedirs(destdirName)</span><br><span class="line">shutil.copyfile(newfileName,destfileName)</span><br><span class="line">print &apos;copy&apos;,newfileName,&apos;--&gt;&apos;,destfileName</span><br><span class="line">if len(sys.argv)&gt;2 and len(sys.argv[1])&gt;=4:</span><br><span class="line">if __name__==&apos;__main__&apos;:</span><br><span class="line">print sys.argv[1]</span><br><span class="line">if not os.path.exists(DEST_PATH):</span><br><span class="line">os.makedirs(DEST_PATH)</span><br><span class="line">fileList = file(sys.argv[1]).readlines()</span><br><span class="line">for oldfileName in fileList:</span><br><span class="line">oldfileName=oldfileName.strip(&apos;\n&apos;)</span><br><span class="line">nPos = oldfileName.find(&apos;Application&apos;,0)</span><br><span class="line">if nPos&lt;0:</span><br><span class="line">nPos = oldfileName.find(&apos;Public&apos;,0)</span><br><span class="line">if nPos&gt;0:</span><br><span class="line">oldfileName = oldfileName[nPos-1:]</span><br><span class="line">#newfileName = oldfileName.replace(sys.argv[1], SOURCE_PATH2)</span><br><span class="line">#destfileName = oldfileName.replace(sys.argv[1], DEST_PATH)</span><br><span class="line">newfileName = SOURCE_PATH2 + oldfileName</span><br><span class="line">destfileName = DEST_PATH + oldfileName</span><br><span class="line">destdirName =  os.path.dirname(destfileName)</span><br><span class="line">if not os.path.exists(destdirName):</span><br><span class="line">os.makedirs(destdirName)</span><br><span class="line">shutil.copyfile(newfileName,destfileName)</span><br><span class="line">print &apos;copy&apos;,newfileName,&apos;--&gt;&apos;,destfileName</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;因为项目需要，我负责上传文件，昨天整理了一些文件，但是今天又改了下，不想手动一个个复制，于是想用程序解决，从cmd到shell到java，突然想到python应该会有这种小程序，上网搜了下，果然有，“Python扫描并复制文件”。拿来用了下，修了点不适合我环境的bug，然后
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
  <entry>
    <title>JS前端的构思</title>
    <link href="https://uames.github.io/2016/2016-07-10-about%20js%20front/"/>
    <id>https://uames.github.io/2016/2016-07-10-about js front/</id>
    <published>2016-05-19T13:41:58.000Z</published>
    <updated>2018-01-15T08:33:00.923Z</updated>
    
    <content type="html"><![CDATA[<ul><li>按功能模块化</li><li>统一资源路径加载</li><li>配置文件</li></ul><p>项目使用require + jquery，另外不间断引入一些其它的插件和组件如layer,mui,sui.<br>另外自己封装了一些功能性的js，用于复用大大加快了开发效率，并且获得了更好的代码结构。<br>前端使用单独的配置文件：config.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> config = &#123;</span><br><span class="line">serviceHost : <span class="string">'http://easy.com'</span>,</span><br><span class="line">srcUrl: <span class="string">'http://m.test.taozhenwang.com:800/public/201504'</span>,</span><br><span class="line">pubUrl: <span class="string">'/js/lib/public'</span>,</span><br><span class="line">ngMenu: <span class="string">'http://cdn.bootcss.com/angular.js/1.5.7/'</span>,</span><br><span class="line">jqUrl: <span class="string">'http://cdn.bootcss.com/jquery/1.11.1/jquery.min'</span>,</span><br><span class="line">getUrl: <span class="function"><span class="keyword">function</span>(<span class="params">url</span>)</span>&#123;</span><br><span class="line"><span class="keyword">return</span> config.serviceHost + url;</span><br><span class="line">&#125;,</span><br><span class="line">init: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">config.pubUrl = config.srcUrl + config.pubUrl;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">config.init();</span><br><span class="line"><span class="built_in">require</span>.config(&#123;</span><br><span class="line">paths: &#123;</span><br><span class="line"><span class="string">'ng'</span>: config.ngMenu + <span class="string">'angular.min'</span>,</span><br><span class="line"><span class="string">'jq'</span>: [config.jqUrl, config.srcUrl + <span class="string">'/js/lib/jquery-1.11.1.min'</span>],</span><br><span class="line"><span class="string">'pub'</span>: config.srcUrl+<span class="string">'/js/lib/public'</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>这里是copy了新项目（使用了angular）的配置文件过来配置的。<br>页面用require引导加载的js文件中，先用一句代码<br><code>require.config({paths: {&#39;config&#39;: &#39;../config&#39;}});</code><br>把配置文件加载进来，然后下面：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">require</span>([<span class="string">'config'</span>], <span class="function"><span class="keyword">function</span> (<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">require</span>([<span class="string">'jq'</span>],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="built_in">require</span>([<span class="string">'pub/public'</span>],<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//尽情书写你的代码吧</span></span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>将配置文件作为最外层的依赖模块<code>require([&#39;config&#39;], function (){});</code>，加载完后，配置文件中require的配置即生效，再依次加载config.js中配置的jquery和public目录下的public.js.<br>  （关于require.js的目录配置和文件配置，建议通读一次<a href="http://www.requirejs.cn/" target="_blank" rel="noopener">require文档</a>，以期对其它特性也有一定的了解）</p><hr><h4 id="1-按功能模块化，封装包括服务的功能，封装的时候要注意可扩展性。"><a href="#1-按功能模块化，封装包括服务的功能，封装的时候要注意可扩展性。" class="headerlink" title="1. 按功能模块化，封装包括服务的功能，封装的时候要注意可扩展性。"></a>1. 按功能模块化，封装包括服务的功能，封装的时候要注意可扩展性。</h4><ul><li>先已有的有phone-email.js</li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;ul&gt;
&lt;li&gt;按功能模块化&lt;/li&gt;
&lt;li&gt;统一资源路径加载&lt;/li&gt;
&lt;li&gt;配置文件&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;项目使用require + jquery，另外不间断引入一些其它的插件和组件如layer,mui,sui.&lt;br&gt;另外自己封装了一些功能性的js，用于复用大
      
    
    </summary>
    
      <category term="Uames" scheme="https://uames.github.io/categories/Uames/"/>
    
    
  </entry>
  
</feed>
