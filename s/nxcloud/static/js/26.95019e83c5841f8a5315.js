webpackJsonp([26],{qVrO:function(t,e,n){var a=n("uNmM");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n("rjj0")("494fc94d",a,!0,{})},r9RA:function(t,e,n){"use strict";function a(t){n("qVrO")}Object.defineProperty(e,"__esModule",{value:!0});var i=n("Xxa5"),s=n.n(i),o=n("exGp"),l=n.n(o),r=n("1DHf"),c=n("32ER"),u=n("2sLL"),p=n("YxJB"),m=n("3Lt7"),d=n("rGqP"),v=n("Msp2"),C=n("HqzV"),f=n("Nv8u"),g=n("RH4F"),x=(r.a,c.a,u.a,p.a,m.a,d.a,v.a,C.a,{name:"adminCoupon",components:{Cell:r.a,CellBox:c.a,XButton:u.a,Flexbox:p.a,FlexboxItem:m.a,Divider:d.a,Actionsheet:v.a,Search:C.a},data:function(){return{pageNum:1,pageSize:10,total:1,totalPage:1,orderList:[],showMoreInfo:!1,likeCouponName:"",btnList:{"permission:coupon:edit":!1,"permission:coupon:enable":!1,"permission:coupon:delete":!1,"permission:coupon:add":!1},statusList:{0:"禁用",1:"审核中",2:"审核通过",3:"审核不通过",4:"退出"},show5:!1,menus5:[{label:"是否通过审核",type:"info"},{label:"审核通过",type:"primary",value:"primary",otherProp:"hey"},{label:"审核不通过",type:"warn",value:"primary",otherProp:"hey"}]}},created:function(){this.BTN_showActive(this.btnList),this.getCouponList()},methods:{click5:function(t,e){console.log(t,e)},handlePageChange:function(t){"prev"==t?this.pageNum=this.pageNum-1:"next"==t&&(this.pageNum=this.pageNum+1),this.getCouponList()},getCouponList:function(){var t=this;return l()(s.a.mark(function e(){var n,a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t,a={pageNum:t.pageNum,pageSize:t.pageSize},t.$vux.loading.show(),Object(f.f)({userId:t.$store.getters.userInfo.userId,likeCouponName:t.likeCouponName,pageNum:t.pageNum,pageSize:t.pageSize}).then(function(t){t&&(t.msg&&!t.data?n.$vux.toast.show({text:t.msg,type:"warn",time:3e3,position:"middle"}):(n.orderList=t.list||[],n.total=t.total,n.totalPage=t.totalPage))}).finally(function(){n.$vux.loading.hide()});case 4:case"end":return e.stop()}},e,t)}))()},orderDetail:function(t){g.a.setItem("adminCouponApply",t),this.$router.push({name:"adminCouponApply",query:{id:t.id}})},addCoupon:function(){this.$router.push({name:"adminAddCoupon"})},editItem:function(t){this.$router.push({name:"adminAddCoupon",query:{id:t.couponId}})},removeItem:function(t){var e=this;this.$vux.confirm.show({title:"提示",content:"是否确定删除?",onCancel:function(){e.$vux.toast.show({text:"已取消删除",type:"success",time:3e3,position:"middle"})},onConfirm:function(){Object(f.v)(t.couponId).then(function(){e.$vux.toast.show({text:"删除成功!",type:"success",time:3e3,position:"middle"})}).finally(function(){e.getCouponList()})}})},stopItem:function(t,e){var n=this;return l()(s.a.mark(function a(){var i;return s.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:i=n,n.$vux.confirm.show({title:"提示",content:0==e?"是否确定禁用":"是否确定启用",onCancel:function(){i.$vux.toast.show({text:"已取消",type:"success",time:3e3,position:"middle"})},onConfirm:function(){Object(f.c)({couponId:t.couponId,couponStatus:e}).then(function(){i.$vux.toast.show({text:1==e?"启用成功":"禁用成功",type:"success",time:3e3,position:"middle"})}).finally(function(){i.getCouponList()})}});case 2:case"end":return a.stop()}},a,n)}))()}}}),A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"adminCoupon-page"},[n("search",{ref:"search",attrs:{placeholder:"优惠券名称","auto-fixed":!1,position:"relative"},on:{"on-change":t.getCouponList},model:{value:t.likeCouponName,callback:function(e){t.likeCouponName=e},expression:"likeCouponName"}}),t._v(" "),n("Divider",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length==0"}]},[t._v("暂无数据")]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.orderList.length,expression:"orderList.length"}],staticClass:"list-group"},t._l(t.orderList,function(e){return n("ul",{staticClass:"list"},[n("li",{staticClass:"list-item"},[n("span",{staticClass:"item-label"},[t._v("优惠券名称")]),t._v(" "),n("span",{staticClass:"item-content"},[t._v(t._s(e.couponName))])]),t._v(" "),n("li",{staticClass:"list-item"},[n("span",{staticClass:"item-label"},[t._v("优惠券id")]),t._v(" "),n("span",{staticClass:"item-content"},[t._v(t._s(e.couponId))])]),t._v(" "),n("li",{staticClass:"list-item status",on:{click:function(e){t.showMoreInfo=!t.showMoreInfo}}},[n("span",{staticClass:"item-label"},[t._v("状态")]),t._v(" "),n("span",{staticClass:"item-content"},[t._v(" "+t._s(1==e.couponStatus?"启用":"禁用"))]),t._v(" "),t.showMoreInfo?t._e():n("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-down",attrs:{type:"ios-arrow-down",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M396.6 160l19.4 20.7L256 352 96 180.7l19.3-20.7L256 310.5z"}})]),t._v(" "),t.showMoreInfo?n("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-up",attrs:{type:"ios-arrow-up",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"}},[n("path",{attrs:{d:"M396.6 352l19.4-20.7L256 160 96 331.3l19.3 20.7L256 201.5z"}})]):t._e()]),t._v(" "),t.showMoreInfo?[n("li",{staticClass:"list-item"},[n("span",{staticClass:"item-label"},[t._v("兑换数量")]),t._v(" "),n("span",{staticClass:"item-content"},[t._v(t._s(e.awardNum))])]),t._v(" "),n("li",{staticClass:"list-item"},[n("span",{staticClass:"item-label"},[t._v("开始时间（绝对时间）")]),t._v(" "),n("span",{staticClass:"item-content"},[t._v(t._s(e.validStartDate))])]),t._v(" "),n("li",{staticClass:"list-item"},[n("span",{staticClass:"item-label"},[t._v("结束时间（绝对时间）")]),t._v(" "),n("span",{staticClass:"item-content"},[t._v(t._s(e.validEndDate))])]),t._v(" "),n("li",{staticClass:"list-item"},[n("span",{staticClass:"item-label"},[t._v("有效期（相对时间）")]),t._v(" "),n("span",{staticClass:"item-content"},[t._v(t._s(e.validDay))])]),t._v(" "),n("li",{staticClass:"list-item"},[n("span",{staticClass:"item-label"},[t._v("生效时间（相对时间）")]),t._v(" "),n("span",{staticClass:"item-content"},[t._v(t._s(e.validUseDay))])])]:t._e(),t._v(" "),n("li",{staticClass:"list-item"},[n("flexbox",[t.btnList["permission:coupon:edit"]?n("flexbox-item",[n("x-button",{attrs:{type:"primary"},nativeOn:{click:function(n){return t.editItem(e)}}},[t._v("修改")])],1):t._e(),t._v(" "),1==e.couponStatus&&t.btnList["permission:coupon:enable"]?n("flexbox-item",[n("x-button",{attrs:{type:"warn"},nativeOn:{click:function(n){return t.stopItem(e,0)}}},[t._v("禁用")])],1):t._e(),t._v(" "),0==e.couponStatus&&t.btnList["permission:coupon:enable"]?n("flexbox-item",[n("x-button",{attrs:{gradients:["#FF9500","#FF9500"]},nativeOn:{click:function(n){return t.stopItem(e,1)}}},[t._v("启用")])],1):t._e(),t._v(" "),t.btnList["permission:coupon:delete"]?n("flexbox-item",[n("x-button",{attrs:{type:"warn"},nativeOn:{click:function(n){return t.removeItem(e)}}},[t._v("删除")])],1):t._e()],1)],1)],2)}),0),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.orderList.length,expression:"orderList.length"}],staticClass:"pagination"},[n("flexbox",[n("flexbox-item",[n("x-button",{attrs:{type:"default",disabled:1==t.pageNum},nativeOn:{click:function(e){return t.handlePageChange("prev")}}},[t._v("上一页")])],1),t._v(" "),n("flexbox-item",[n("div",{staticClass:"current-page"},[t._v(" "+t._s(t.pageNum+"/"+t.totalPage))])]),t._v(" "),n("flexbox-item",[n("x-button",{attrs:{type:"default",disabled:t.pageNum==t.totalPage},nativeOn:{click:function(e){return t.handlePageChange("next")}}},[t._v("下一页")])],1)],1)],1),t._v(" "),n("actionsheet",{attrs:{menus:t.menus5,"show-cancel":""},on:{"on-click-menu":t.click5},model:{value:t.show5,callback:function(e){t.show5=e},expression:"show5"}})],1)},h=[],_={render:A,staticRenderFns:h},b=_,w=n("VU/8"),B=a,y=w(x,b,!1,B,"data-v-70aa7188",null);e.default=y.exports},uNmM:function(t,e,n){e=t.exports=n("FZ+f")(!0),e.push([t.i,"\n.adminCoupon-page[data-v-70aa7188] {\n  overflow: hidden;\n}\n.list-group[data-v-70aa7188] {\n  background: #ededed;\n  margin-bottom: 30px;\n}\n.list[data-v-70aa7188] {\n  background: #fff;\n  font-size: 15px;\n  margin-bottom: 8px;\n}\n.list .list-item[data-v-70aa7188] {\n  padding: 5px 10px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n}\n.list .list-item .item-label[data-v-70aa7188] {\n  margin-right: 1em;\n  min-width: 4em;\n  text-align: justify;\n  text-align-last: justify;\n}\n.list .list-item .item-content[data-v-70aa7188] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  text-align: right;\n}\n.list .list-item.status .item-content[data-v-70aa7188] {\n  color: #2DB9F9;\n}\n.pagination[data-v-70aa7188] {\n  padding: 20px;\n  background: #fff;\n}\n.pagination .current-page[data-v-70aa7188] {\n  text-align: center;\n  color: #2DB9F9;\n}\n","",{version:3,sources:["D:/work/git/nxcloud/src/pages/manage/admin/AdminCoupon.vue"],names:[],mappings:";AACA;EACE,iBAAiB;CAClB;AACD;EACE,oBAAoB;EACpB,oBAAoB;CACrB;AACD;EACE,iBAAiB;EACjB,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,kBAAkB;EAClB,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;CACf;AACD;EACE,kBAAkB;EAClB,eAAe;EACf,oBAAoB;EACpB,yBAAyB;CAC1B;AACD;EACE,oBAAoB;EACpB,gBAAgB;UACR,QAAQ;EAChB,kBAAkB;CACnB;AACD;EACE,eAAe;CAChB;AACD;EACE,cAAc;EACd,iBAAiB;CAClB;AACD;EACE,mBAAmB;EACnB,eAAe;CAChB",file:"AdminCoupon.vue",sourcesContent:["\n.adminCoupon-page[data-v-70aa7188] {\n  overflow: hidden;\n}\n.list-group[data-v-70aa7188] {\n  background: #ededed;\n  margin-bottom: 30px;\n}\n.list[data-v-70aa7188] {\n  background: #fff;\n  font-size: 15px;\n  margin-bottom: 8px;\n}\n.list .list-item[data-v-70aa7188] {\n  padding: 5px 10px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n}\n.list .list-item .item-label[data-v-70aa7188] {\n  margin-right: 1em;\n  min-width: 4em;\n  text-align: justify;\n  text-align-last: justify;\n}\n.list .list-item .item-content[data-v-70aa7188] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  text-align: right;\n}\n.list .list-item.status .item-content[data-v-70aa7188] {\n  color: #2DB9F9;\n}\n.pagination[data-v-70aa7188] {\n  padding: 20px;\n  background: #fff;\n}\n.pagination .current-page[data-v-70aa7188] {\n  text-align: center;\n  color: #2DB9F9;\n}\n"],sourceRoot:""}])}});