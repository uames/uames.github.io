webpackJsonp([27],{"/tdr":function(t,e,i){"use strict";function n(t){i("rEtz")}Object.defineProperty(e,"__esModule",{value:!0});var a=i("Xxa5"),s=i.n(a),o=i("exGp"),l=i.n(o),r=i("1DHf"),c=i("32ER"),u=i("2sLL"),p=i("YxJB"),d=i("3Lt7"),v=i("rGqP"),m=i("Msp2"),C=i("HqzV"),g=i("Nv8u"),f=i("RH4F"),A=(r.a,c.a,u.a,p.a,d.a,v.a,m.a,C.a,{name:"couponActivity",components:{Cell:r.a,CellBox:c.a,XButton:u.a,Flexbox:p.a,FlexboxItem:d.a,Divider:v.a,Actionsheet:m.a,Search:C.a},data:function(){return{pageNum:1,pageSize:10,total:1,totalPage:1,orderList:[],showMoreInfo:!1,likeCouponName:"",activityLoading:!1,dialogVisible:!1,loading:!1,btnList:{"permission:couponactivity:apply":!1,"permission:couponactivity:audit":!1,"permission:couponactivity:edit":!1,"permission:couponactivity:delete":!1,"permission:couponactivity:enable":!1},statuList:["待审核","审核通过","审核不通过"],show5:!1,menus5:[{label:"是否通过审核",type:"info"},{label:"审核通过",type:"primary",value:"primary",otherProp:"hey"},{label:"审核不通过",type:"warn",value:"primary",otherProp:"hey"}]}},created:function(){this.BTN_showActive(this.btnList),this.getCouponList()},methods:{click5:function(t,e){console.log(t,e)},handlePageChange:function(t){"prev"==t?this.pageNum=this.pageNum-1:"next"==t&&(this.pageNum=this.pageNum+1),this.getCouponList()},getCouponList:function(){var t=this;return l()(s.a.mark(function e(){var i,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=t,n={pageNum:t.pageNum,pageSize:t.pageSize},t.$vux.loading.show(),Object(g.e)({userId:t.$store.getters.userInfo.userId,likeCouponName:t.likeCouponName,pageNum:t.pageNum,pageSize:t.pageSize}).then(function(t){t&&(t.msg&&!t.data?i.$vux.toast.show({text:t.msg,type:"warn",time:3e3,position:"middle"}):(i.orderList=t.list||[],i.total=t.total,i.totalPage=t.totalPage))}).finally(function(){i.$vux.loading.hide()});case 4:case"end":return e.stop()}},e,t)}))()},orderDetail:function(t){f.a.setItem("couponActivityApply",t),this.$router.push({name:"couponActivityApply",query:{id:t.id}})},addCoupon:function(){this.$router.push({name:"activityDetail"})},editItem:function(t){this.$router.push({name:"activityDetail",query:{id:t.partnerCouponId,type:type,status:t.partnerCouponAuditStatus}})},removeItem:function(t){var e=this;this.$vux.confirm.show({title:"提示",content:"是否确定删除?",onCancel:function(){e.$vux.toast.show({text:"已取消删除",type:"success",time:3e3,position:"middle"})},onConfirm:function(){Object(g.u)(t.partnerCouponId).then(function(){e.$vux.toast.show({text:"删除成功!",type:"success",time:3e3,position:"middle"})}).finally(function(){e.getCouponList()})}})},stopItem:function(t,e){var i=this;return l()(s.a.mark(function n(){var a;return s.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:a=i,i.$vux.confirm.show({title:"提示",content:0==e?"是否确定禁用":"是否确定启用",onCancel:function(){a.$vux.toast.show({text:"已取消",type:"success",time:3e3,position:"middle"})},onConfirm:function(){Object(g.r)({partnerCouponId:t.partnerCouponId,partnerCouponStatus:e}).then(function(){a.$vux.toast.show({text:1==e?"启用成功":"禁用成功",type:"success",time:3e3,position:"middle"})}).finally(function(){a.getCouponList()})}});case 2:case"end":return n.stop()}},n,i)}))()},examine:function(t){this.rowData=t,this.dialogVisible=!0,this.checkData.reason="",this.checkData.isChecked=""},examineSure:function(t){var e=this;return l()(s.a.mark(function i(){var n,a;return s.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n=e,""!==t){i.next=4;break}return e.$message.error("请选择是否通过"),i.abrupt("return");case 4:return e.activityLoading=!0,a={partnerCouponAuditStatus:t,partnerCouponId:e.rowData.partnerCouponId},2===t&&(a.reason=e.checkData.reason),i.next=9,Object(g.b)(a).then(function(){n.$vux.toast.show({text:"启用成功",type:"success",time:3e3,position:"middle"})}).finally(function(){n.dialogVisible=!1,n.activityLoading=!1,n.getCouponList()});case 9:case"end":return i.stop()}},i,e)}))()}}}),h=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"couponActivity-page"},[i("search",{ref:"search",attrs:{placeholder:"优惠券名称","auto-fixed":!1,position:"relative"},on:{"on-change":t.getCouponList},model:{value:t.likeCouponName,callback:function(e){t.likeCouponName=e},expression:"likeCouponName"}}),t._v(" "),i("Divider",{directives:[{name:"show",rawName:"v-show",value:0==t.orderList.length,expression:"orderList.length==0"}]},[t._v("暂无数据")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.orderList.length,expression:"orderList.length"}],staticClass:"list-group"},t._l(t.orderList,function(e){return i("ul",{staticClass:"list"},[i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("优惠券名称")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s(e.couponName))])]),t._v(" "),i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("优惠券id")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s(e.couponId))])]),t._v(" "),i("li",{staticClass:"list-item status"},[i("span",{staticClass:"item-label"},[t._v("状态")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(" "+t._s(1==e.partnerCouponStatus?"启用":"禁用"))])]),t._v(" "),i("li",{staticClass:"list-item status",on:{click:function(e){t.showMoreInfo=!t.showMoreInfo}}},[i("span",{staticClass:"item-label"},[t._v("审核状态")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(" "+t._s(t.statuList[e.partnerCouponAuditStatus]))]),t._v(" "),t.showMoreInfo?t._e():i("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-down",attrs:{type:"ios-arrow-down",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"}},[i("path",{attrs:{d:"M396.6 160l19.4 20.7L256 352 96 180.7l19.3-20.7L256 310.5z"}})]),t._v(" "),t.showMoreInfo?i("svg",{staticClass:"vux-x-icon vux-x-icon-ios-arrow-up",attrs:{type:"ios-arrow-up",size:"30",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 512 512"}},[i("path",{attrs:{d:"M396.6 352l19.4-20.7L256 160 96 331.3l19.3 20.7L256 201.5z"}})]):t._e()]),t._v(" "),t.showMoreInfo?[i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("发放数量")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s("999999"==String(e.deliverNum)?"不限数量":e.deliverNum))])]),t._v(" "),i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("兑换数量")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s(e.awardNum))])]),t._v(" "),i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("发放时间")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s(e.deliverStartDate)+" - "+t._s(e.deliverEndDate))])]),t._v(" "),i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("开始时间（绝对时间）")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s(e.couponStartDate))])]),t._v(" "),i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("结束时间（绝对时间）")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s(e.couponEndDate))])]),t._v(" "),i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("有效期（相对时间）")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s(e.validDay))])]),t._v(" "),i("li",{staticClass:"list-item"},[i("span",{staticClass:"item-label"},[t._v("生效时间（相对时间）")]),t._v(" "),i("span",{staticClass:"item-content"},[t._v(t._s(e.validUseDay))])])]:t._e(),t._v(" "),i("li",{staticClass:"list-item"},[i("flexbox",[i("flexbox-item",[i("x-button",{attrs:{type:"primary"},nativeOn:{click:function(i){return t.editItem(e,"look")}}},[t._v("查看")])],1),t._v(" "),i("flexbox-item",[t.btnList["permission:couponactivity:audit"]&&[0,2].includes(e.partnerCouponAuditStatus)?i("x-button",{attrs:{type:"primary"},nativeOn:{click:function(i){return t.examine(e)}}},[t._v("审核")]):t._e()],1)],1)],1)],2)}),0),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.orderList.length,expression:"orderList.length"}],staticClass:"pagination"},[i("flexbox",[i("flexbox-item",[i("x-button",{attrs:{type:"default",disabled:t.pageNum<=1},nativeOn:{click:function(e){return t.handlePageChange("prev")}}},[t._v("上一页")])],1),t._v(" "),i("flexbox-item",[i("div",{staticClass:"current-page"},[t._v(" "+t._s((0==t.totalPage?0:t.pageNum)+"/"+t.totalPage))])]),t._v(" "),i("flexbox-item",[i("x-button",{attrs:{type:"default",disabled:t.pageNum==t.totalPage||0==t.totalPage},nativeOn:{click:function(e){return t.handlePageChange("next")}}},[t._v("下一页")])],1)],1)],1),t._v(" "),i("actionsheet",{attrs:{menus:t.menus5,"show-cancel":""},on:{"on-click-menu":t.click5},model:{value:t.show5,callback:function(e){t.show5=e},expression:"show5"}})],1)},x=[],b={render:h,staticRenderFns:x},_=b,w=i("VU/8"),y=n,B=w(A,_,!1,y,"data-v-6d66b79c",null);e.default=B.exports},XF1f:function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,"\n.couponActivity-page[data-v-6d66b79c] {\n  overflow: hidden;\n  background: #fff;\n}\n.list-group[data-v-6d66b79c] {\n  background: #ededed;\n  margin-bottom: 30px;\n}\n.list[data-v-6d66b79c] {\n  background: #fff;\n  font-size: 15px;\n  margin-bottom: 8px;\n}\n.list .list-item[data-v-6d66b79c] {\n  padding: 5px 10px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n}\n.list .list-item .item-label[data-v-6d66b79c] {\n  margin-right: 1em;\n  min-width: 4em;\n  text-align: justify;\n  text-align-last: justify;\n}\n.list .list-item .item-content[data-v-6d66b79c] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  text-align: right;\n}\n.list .list-item.status .item-content[data-v-6d66b79c] {\n  color: #2DB9F9;\n}\n.pagination[data-v-6d66b79c] {\n  margin: 30px 20px;\n}\n.pagination .current-page[data-v-6d66b79c] {\n  text-align: center;\n  color: #2DB9F9;\n}\n","",{version:3,sources:["D:/work/git/nxcloud/src/pages/manage/admin/CouponActivity.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,iBAAiB;CAClB;AACD;EACE,oBAAoB;EACpB,oBAAoB;CACrB;AACD;EACE,iBAAiB;EACjB,gBAAgB;EAChB,mBAAmB;CACpB;AACD;EACE,kBAAkB;EAClB,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;CACf;AACD;EACE,kBAAkB;EAClB,eAAe;EACf,oBAAoB;EACpB,yBAAyB;CAC1B;AACD;EACE,oBAAoB;EACpB,gBAAgB;UACR,QAAQ;EAChB,kBAAkB;CACnB;AACD;EACE,eAAe;CAChB;AACD;EACE,kBAAkB;CACnB;AACD;EACE,mBAAmB;EACnB,eAAe;CAChB",file:"CouponActivity.vue",sourcesContent:["\n.couponActivity-page[data-v-6d66b79c] {\n  overflow: hidden;\n  background: #fff;\n}\n.list-group[data-v-6d66b79c] {\n  background: #ededed;\n  margin-bottom: 30px;\n}\n.list[data-v-6d66b79c] {\n  background: #fff;\n  font-size: 15px;\n  margin-bottom: 8px;\n}\n.list .list-item[data-v-6d66b79c] {\n  padding: 5px 10px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n}\n.list .list-item .item-label[data-v-6d66b79c] {\n  margin-right: 1em;\n  min-width: 4em;\n  text-align: justify;\n  text-align-last: justify;\n}\n.list .list-item .item-content[data-v-6d66b79c] {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1;\n          flex: 1;\n  text-align: right;\n}\n.list .list-item.status .item-content[data-v-6d66b79c] {\n  color: #2DB9F9;\n}\n.pagination[data-v-6d66b79c] {\n  margin: 30px 20px;\n}\n.pagination .current-page[data-v-6d66b79c] {\n  text-align: center;\n  color: #2DB9F9;\n}\n"],sourceRoot:""}])},rEtz:function(t,e,i){var n=i("XF1f");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);i("rjj0")("a16530b6",n,!0,{})}});