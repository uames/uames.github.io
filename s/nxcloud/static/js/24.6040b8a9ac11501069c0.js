webpackJsonp([24],{"3sQj":function(t,a,e){var s=e("eM1j");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);e("rjj0")("55bdb711",s,!0,{})},BzZy:function(t,a,e){"use strict";function s(t){e("3sQj")}Object.defineProperty(a,"__esModule",{value:!0});var n=e("Xxa5"),i=e.n(n),o=e("exGp"),r=e.n(o),c=e("wwIJ"),d=e("pDNl"),m=e("/0UN"),l=e("hGvq"),p=e("1DHf"),u=e("EmH9"),b=e("2sLL"),v=e("UgCr"),h=(c.a,d.a,m.a,l.a,p.a,u.a,b.a,{name:"DataProduct",components:{Selector:c.a,XInput:d.a,Checker:m.a,CheckerItem:l.a,Cell:p.a,CheckIcon:u.a,XButton:b.a},data:function(){var t=this;return{configLoaidng:!1,payMent:1,crmData:{city:"",region:"",crmCustId:"",crmCustIdTmp:"",showCusId:"",accountId:"",accountIdTmp:"",showAccountId:"",yunAccountInfo:"",yunAccountTmp:"",bizId:""},staticData:{databaseEngine:[],databaseVersion:[],instanceType:[],storage:[],capabilityFormat:[],timeList:[],numList:0},performance:"通用增强型",dataForm:{name:"default",datatype:"",edition:"5.7",exampletype:"",buyTime:0,buyNum:1,savespace:"40GB",pass:"",checkPass:""},rules:{name:[{validator:function(t,a,e){if(!a)return e(new Error("实例名不能为空"));e()},trigger:"blur"}],pass:[{validator:function(a,e,s){""===e?s(new Error("请输入密码")):(""!==t.dataForm.checkPass&&t.$refs.dataForm.validateField("checkPass"),s())},trigger:"blur"}],checkPass:[{validator:function(a,e,s){""===e?s(new Error("请再次输入密码")):e!==t.dataForm.pass?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},marks:{40:"40GB",800:"800GB",1550:"1,550GB",2300:"2,300GB",4e3:"4,000GB"},templateRadio:1,specsData:{keyName:1,keyValue:"1核|2GB"},vpcOptions:[{value:1,label:"default_vpc"}],keyCodeList:{},orderInitData:{}}},computed:{databaseVersion:function(){var t=this.dataForm.datatype,a=this.staticData.databaseVersion;return a=a.filter(function(a){return a.remark===t}),a}},created:function(){this.getBaseData()},mounted:function(){document.documentElement.scrollTop=0},methods:{getBaseData:function(){var t=this;return r()(i.a.mark(function a(){var e,s,n,o,r,c,d,m;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=t,a.prev=1,e.configLoaidng=!0,a.next=5,Object(v.r)({typeCode:"databaseEngine,instanceType,storage,databaseVersion,capabilityFormat,timeKey,numKey"});case 5:if(s=a.sent,Array.isArray(s)){a.next=8;break}return a.abrupt("return");case 8:n=0;case 9:if(!(n<s.length)){a.next=33;break}o=s[n],"numKey"!==o.typeCode&&(t.keyCodeList[o.keyValue]=o),a.t0=s[n].typeCode,a.next="databaseEngine"===a.t0?15:"instanceType"===a.t0?17:"storage"===a.t0?19:"databaseVersion"===a.t0?21:"capabilityFormat"===a.t0?23:"timeKey"===a.t0?25:"numKey"===a.t0?27:29;break;case 15:return e.staticData.databaseEngine.push(s[n]),a.abrupt("break",30);case 17:return e.staticData.instanceType.push(s[n]),a.abrupt("break",30);case 19:return e.staticData.storage.push(s[n]),a.abrupt("break",30);case 21:return e.staticData.databaseVersion.push(s[n]),a.abrupt("break",30);case 23:return e.staticData.capabilityFormat.push(s[n]),a.abrupt("break",30);case 25:return e.staticData.timeList.push(s[n]),a.abrupt("break",30);case 27:return e.staticData.numList=s[n],a.abrupt("break",30);case 29:return a.abrupt("break",30);case 30:n++,a.next=9;break;case 33:r=e.staticData,c=r.databaseEngine,d=r.instanceType,m=r.capabilityFormat,e.dataForm.datatype=c[0].keyValue,e.dataForm.exampletype=d[0].keyValue,e.dataForm.buyTime=e.staticData.timeList[11].keyValue,e.handleDatatypeChange(),e.getTemplateRow(0,m[0]);case 39:return a.prev=39,e.configLoaidng=!1,a.finish(39);case 42:case"end":return a.stop()}},a,t,[[1,,39,42]])}))()},crmInfo:function(t){this.crmData=t},handleDatatypeChange:function(){var t=this;t.$nextTick(function(){t.dataForm.edition=t.databaseVersion[0].keyValue})},getTemplateRow:function(t,a){if(a){for(var e in this.specsData)this.specsData[e]=a[e];this.templateRadio=this.specsData.keyValue}},toast:function(t){this.$vux.toast.text(t)},checkPassword:function(t){var a=/^(?![0-9a-z]+$)(?![0-9A-Z]+$)(?![0-9\W]+$)(?![a-z\W]+$)(?![a-zA-Z]+$)(?![A-Z\W]+$)[a-zA-Z0-9\W_]+$/;if(1===t){if(this.dataForm.pass.length<8)return this.toast("密码长度要大于8"),!1;if(!a.test(this.dataForm.pass))return this.toast("密码必须包含大写字母、小写字母、数字和符号其中三项"),!1}else{if(!a.test(this.dataForm.checkPass))return this.toast("密码必须包含大写字母、小写字母、数字和符号其中三项"),!1;if(this.dataForm.checkPass!==this.dataForm.pass)return this.toast("密码不一致"),!1}return!0},validate:function(){var t=!0;return""===this.dataForm.name?(this.toast("实例名称不能为空"),t=!1):""===this.dataForm.datatype?(this.toast("数据库引擎不能为空"),t=!1):""===this.dataForm.edition?(this.toast("数据库版本不能为空"),t=!1):""===this.dataForm.exampletype?(this.toast("实例类型不能为空"),t=!1):""===this.dataForm.savespace?(this.toast("存储空间不能为空"),t=!1):t=this.checkPassword(2),t},submitForm:function(t){if(!this.validate())return console.log("error submit!!"),!1;this.goOrder()},goOrder:function(){this.switchData();var t=[],a={productId:10,productName:"天翼云数据库",orderType:4,perPrice:"",unitPrice:"",data:this.dataForm,crmData:this.crmData,productFiles:t,configData:this.configData,flavorId:"",flavorName:"",tableShowData:{config:this.specsData.keyValue,time:this.dataForm.buyTime,num:this.dataForm.buyNum}};this.orderInitData=a,this.payMent=2},switchData:function(){var t=this,a=t.dataForm,e=[];e.push({itemCode:"590040017",itemCodeName:a.pass,itemCodeValue:a.pass,itemId:"590040017",itemIdType:"",itemMode:"",itemName:"登录数据库密码"}),e.push({itemCode:"实例名称",itemId:"实例名称",itemCodeName:a.name,itemCodeValue:a.name,itemIdType:"",itemMode:"",itemName:"实例名称"});var s=this.keyCodeList;for(var n in a){if(!["name","buyNum","pass","checkPass"].includes(n)){var i=a[n],o=s[i];e.push({itemCode:o.keyCode,itemCodeName:o.keyName,itemCodeValue:o.keyValue,itemIdType:o.typeCode,itemId:"",itemMode:"",itemName:""})}}e.push({itemCode:"590039924",itemCodeName:1,itemCodeValue:1,itemIdType:"numKey",itemId:"",itemMode:"",itemName:""}),this.configData=e},showPage:function(){this.payMent=1}}}),f=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"database"},[e("div",{directives:[{name:"show",rawName:"v-show",value:1===t.payMent,expression:"payMent === 1"}],staticClass:"dataproduct"},[e("div",{staticClass:"dataproduct-container"},[e("div",{staticClass:"content"},[e("product-cust-info",{attrs:{needBizid:!1},on:{crmData:t.crmInfo}}),t._v(" "),e("div",{staticClass:"content-section"},[e("x-input",{attrs:{title:"实例名称","label-width":"10",placeholder:"请输入实例名称"},model:{value:t.dataForm.name,callback:function(a){t.$set(t.dataForm,"name",a)},expression:"dataForm.name"}}),t._v(" "),e("selector",{attrs:{"value-map":["keyValue","keyValue"],title:"数据库引擎",options:t.staticData.databaseEngine},on:{"on-change":t.handleDatatypeChange},model:{value:t.dataForm.datatype,callback:function(a){t.$set(t.dataForm,"datatype",a)},expression:"dataForm.datatype"}}),t._v(" "),e("selector",{attrs:{"value-map":["keyValue","keyValue"],title:"数据库版本",options:t.databaseVersion},model:{value:t.dataForm.edition,callback:function(a){t.$set(t.dataForm,"edition",a)},expression:"dataForm.edition"}}),t._v(" "),e("selector",{attrs:{"value-map":["keyValue","keyValue"],title:"实例类型",options:t.staticData.instanceType},model:{value:t.dataForm.exampletype,callback:function(a){t.$set(t.dataForm,"exampletype",a)},expression:"dataForm.exampletype"}})],1),t._v(" "),e("div",{staticClass:"content-section"},[e("cell",{attrs:{title:"性能规格",value:"通用增强型"}}),t._v(" "),e("div",{staticClass:"form_item"},[e("div",{staticClass:"title"},[t._v("CPU/内存:")]),t._v(" "),t._l(t.staticData.capabilityFormat,function(a,s){return e("p",{key:a.keyValue,staticClass:"ml15"},[e("check-icon",{staticClass:"checkIcon",attrs:{value:t.templateRadio===a.keyValue},nativeOn:{click:function(e){return t.getTemplateRow(s,a)}}},[t._v(t._s(a.keyValue))])],1)})],2),t._v(" "),e("cell",{attrs:{title:"当前选择实例：",value:t.specsData.keyValue}}),t._v(" "),e("selector",{attrs:{"value-map":["keyValue","keyValue"],title:"存储空间",options:t.staticData.storage},model:{value:t.dataForm.savespace,callback:function(a){t.$set(t.dataForm,"savespace",a)},expression:"dataForm.savespace"}})],1),t._v(" "),e("div",{staticClass:"content-section"},[e("cell",{attrs:{title:"管理员账户名",value:"root"}}),t._v(" "),e("p",{staticClass:"passwordTips"},[t._v("请妥善管理密码，系统无法获取您设置的密码内容。")]),t._v(" "),e("x-input",{attrs:{title:"管理员密码","label-width":"10",placeholder:"请输入密码",type:"password"},model:{value:t.dataForm.pass,callback:function(a){t.$set(t.dataForm,"pass",a)},expression:"dataForm.pass"}}),t._v(" "),e("x-input",{attrs:{title:"密码","label-width":"10",placeholder:"请确认密码",type:"password"},model:{value:t.dataForm.checkPass,callback:function(a){t.$set(t.dataForm,"checkPass",a)},expression:"dataForm.checkPass"}})],1),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"content-section"},[e("selector",{attrs:{"value-map":["keyValue","keyName"],title:"购买时长：",options:t.staticData.timeList},model:{value:t.dataForm.buyTime,callback:function(a){t.$set(t.dataForm,"buyTime",a)},expression:"dataForm.buyTime"}})],1)],1),t._v(" "),e("div",{staticClass:"bottom-container"},[e("x-button",{attrs:{type:"primary"},nativeOn:{click:function(a){return t.submitForm("dataForm")}}},[t._v("立即购买")])],1)])]),t._v(" "),e("product-order",{directives:[{name:"show",rawName:"v-show",value:2===t.payMent,expression:"payMent === 2"}],attrs:{orderInitData:t.orderInitData},on:{showPage:t.showPage}})],1)},y=[],k={render:f,staticRenderFns:y},C=k,A=e("VU/8"),x=s,g=A(h,C,!1,x,"data-v-3e7cb540",null);a.default=g.exports},eM1j:function(t,a,e){a=t.exports=e("FZ+f")(!0),a.push([t.i,"\n.content-section[data-v-3e7cb540] {\n  background: #fff;\n  margin-bottom: 5px;\n}\n.content-section .form_item[data-v-3e7cb540] {\n  padding-bottom: 10px;\n}\n.content-section .title[data-v-3e7cb540] {\n  margin: 0 0 0 15px;\n  padding: 5px 0;\n  border-top: 1px solid #f0f0f0;\n}\n.ml15[data-v-3e7cb540] {\n  margin-left: 15px;\n}\n.checkIcon[data-v-3e7cb540] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  margin: 5px 0 5px 5px;\n}\n.checkIcon > span[data-v-3e7cb540] {\n  -webkit-box-flex: 1;\n  -webkit-flex: auto;\n          flex: auto;\n}\n.passwordTips[data-v-3e7cb540] {\n  font-size: 13px;\n  text-align: center;\n  margin-bottom: 8px;\n  color: #999;\n}\n","",{version:3,sources:["D:/work/git/nxcloud/src/pages/market/DataProduct.vue"],names:[],mappings:";AACA;EACE,iBAAiB;EACjB,mBAAmB;CACpB;AACD;EACE,qBAAqB;CACtB;AACD;EACE,mBAAmB;EACnB,eAAe;EACf,8BAA8B;CAC/B;AACD;EACE,kBAAkB;CACnB;AACD;EACE,qBAAqB;EACrB,sBAAsB;EACtB,cAAc;EACd,sBAAsB;CACvB;AACD;EACE,oBAAoB;EACpB,mBAAmB;UACX,WAAW;CACpB;AACD;EACE,gBAAgB;EAChB,mBAAmB;EACnB,mBAAmB;EACnB,YAAY;CACb",file:"DataProduct.vue",sourcesContent:["\n.content-section[data-v-3e7cb540] {\n  background: #fff;\n  margin-bottom: 5px;\n}\n.content-section .form_item[data-v-3e7cb540] {\n  padding-bottom: 10px;\n}\n.content-section .title[data-v-3e7cb540] {\n  margin: 0 0 0 15px;\n  padding: 5px 0;\n  border-top: 1px solid #f0f0f0;\n}\n.ml15[data-v-3e7cb540] {\n  margin-left: 15px;\n}\n.checkIcon[data-v-3e7cb540] {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: flex;\n  margin: 5px 0 5px 5px;\n}\n.checkIcon > span[data-v-3e7cb540] {\n  -webkit-box-flex: 1;\n  -webkit-flex: auto;\n          flex: auto;\n}\n.passwordTips[data-v-3e7cb540] {\n  font-size: 13px;\n  text-align: center;\n  margin-bottom: 8px;\n  color: #999;\n}\n"],sourceRoot:""}])}});