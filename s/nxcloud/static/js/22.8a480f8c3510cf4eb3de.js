webpackJsonp([22],{"58EQ":function(a,e,t){e=a.exports=t("FZ+f")(!0),e.push([a.i,"","",{version:3,sources:[],names:[],mappings:"",file:"DataProduct.vue",sourceRoot:""}])},BzZy:function(a,e,t){"use strict";function s(a){t("Yn07")}Object.defineProperty(e,"__esModule",{value:!0});var r=t("Xxa5"),i=t.n(r),o=t("exGp"),n=t.n(o),l=t("UgCr"),c={components:{},data:function(){var a=this;return{configLoaidng:!1,payMent:1,crmData:{city:"",region:"",crmCustId:"",crmCustIdTmp:"",showCusId:"",accountId:"",accountIdTmp:"",showAccountId:"",yunAccountInfo:"",yunAccountTmp:"",bizId:""},staticData:{databaseEngine:[],databaseVersion:[],instanceType:[],storage:[],capabilityFormat:[],timeList:[],numList:0},performance:"通用增强型",dataForm:{name:"default",datatype:"",edition:"5.7",exampletype:"",buyTime:0,buyNum:1,savespace:"40GB",pass:"",checkPass:""},rules:{name:[{validator:function(a,e,t){if(!e)return t(new Error("实例名不能为空"));t()},trigger:"blur"}],pass:[{validator:function(e,t,s){""===t?s(new Error("请输入密码")):(""!==a.dataForm.checkPass&&a.$refs.dataForm.validateField("checkPass"),s())},trigger:"blur"}],checkPass:[{validator:function(e,t,s){""===t?s(new Error("请再次输入密码")):t!==a.dataForm.pass?s(new Error("两次输入密码不一致!")):s()},trigger:"blur"}]},marks:{40:"40GB",800:"800GB",1550:"1,550GB",2300:"2,300GB",4e3:"4,000GB"},templateRadio:1,specsData:{keyName:1,keyValue:"1核|2GB"},vpcOptions:[{value:1,label:"default_vpc"}],keyCodeList:{},orderInitData:{}}},computed:{databaseVersion:function(){var a=this.dataForm.datatype,e=this.staticData.databaseVersion;return e=e.filter(function(e){return e.remark===a}),e}},created:function(){this.getBaseData()},mounted:function(){document.documentElement.scrollTop=0},methods:{getBaseData:function(){var a=this;return n()(i.a.mark(function e(){var t,s,r,o,n,c,u,m;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=a,e.prev=1,t.configLoaidng=!0,e.next=5,Object(l.r)({typeCode:"databaseEngine,instanceType,storage,databaseVersion,capabilityFormat,timeKey,numKey"});case 5:if(s=e.sent,Array.isArray(s)){e.next=8;break}return e.abrupt("return");case 8:r=0;case 9:if(!(r<s.length)){e.next=33;break}o=s[r],"numKey"!==o.typeCode&&(a.keyCodeList[o.keyValue]=o),e.t0=s[r].typeCode,e.next="databaseEngine"===e.t0?15:"instanceType"===e.t0?17:"storage"===e.t0?19:"databaseVersion"===e.t0?21:"capabilityFormat"===e.t0?23:"timeKey"===e.t0?25:"numKey"===e.t0?27:29;break;case 15:return t.staticData.databaseEngine.push(s[r]),e.abrupt("break",30);case 17:return t.staticData.instanceType.push(s[r]),e.abrupt("break",30);case 19:return t.staticData.storage.push(s[r]),e.abrupt("break",30);case 21:return t.staticData.databaseVersion.push(s[r]),e.abrupt("break",30);case 23:return t.staticData.capabilityFormat.push(s[r]),e.abrupt("break",30);case 25:return t.staticData.timeList.push(s[r]),e.abrupt("break",30);case 27:return t.staticData.numList=s[r],e.abrupt("break",30);case 29:return e.abrupt("break",30);case 30:r++,e.next=9;break;case 33:n=t.staticData,c=n.databaseEngine,u=n.instanceType,m=n.capabilityFormat,t.dataForm.datatype=c[0].keyValue,t.dataForm.exampletype=u[0].keyValue,t.dataForm.buyTime=t.staticData.timeList[11].keyValue,t.handleDatatypeChange(),t.getTemplateRow(0,m[0]);case 39:return e.prev=39,t.configLoaidng=!1,e.finish(39);case 42:case"end":return e.stop()}},e,a,[[1,,39,42]])}))()},crmInfo:function(a){this.crmData=a},handleDatatypeChange:function(){var a=this;a.$nextTick(function(){a.dataForm.edition=a.databaseVersion[0].keyValue})},getTemplateRow:function(a,e){if(e){for(var t in this.specsData)this.specsData[t]=e[t];this.templateRadio=this.specsData.keyValue}},submitForm:function(a){var e=this;this.$refs[a].validate(function(a){if(!a)return console.log("error submit!!"),!1;e.goOrder()})},goOrder:function(){this.switchData();var a=[],e={productId:10,productName:"天翼云数据库",orderType:4,perPrice:"",unitPrice:"",data:this.dataForm,crmData:this.crmData,productFiles:a,configData:this.configData,flavorId:"",flavorName:"",tableShowData:{config:this.specsData.keyValue,time:this.dataForm.buyTime,num:this.dataForm.buyNum}};this.orderInitData=e,this.payMent=2},switchData:function(){var a=this,e=a.dataForm,t=[];t.push({itemCode:"590040017",itemCodeName:e.pass,itemCodeValue:e.pass,itemId:"590040017",itemIdType:"",itemMode:"",itemName:"登录数据库密码"}),t.push({itemCode:"实例名称",itemId:"实例名称",itemCodeName:e.name,itemCodeValue:e.name,itemIdType:"",itemMode:"",itemName:"实例名称"});var s=this.keyCodeList;for(var r in e){if(!["name","buyNum","pass","checkPass"].includes(r)){var i=e[r],o=s[i];t.push({itemCode:o.keyCode,itemCodeName:o.keyName,itemCodeValue:o.keyValue,itemIdType:o.typeCode,itemId:"",itemMode:"",itemName:""})}}t.push({itemCode:"590039924",itemCodeName:1,itemCodeValue:1,itemIdType:"numKey",itemId:"",itemMode:"",itemName:""}),this.configData=t},showPage:function(){this.payMent=1}}},u=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",{staticClass:"database"},[t("product-process",{attrs:{title:"创建数据库实例",payMent:a.payMent}}),a._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:a.configLoaidng,expression:"configLoaidng"},{name:"show",rawName:"v-show",value:1===a.payMent,expression:"payMent === 1"}],staticClass:"dataproduct"},[t("div",{staticClass:"dataproduct-container"},[t("div",{staticClass:"content"},[t("el-form",{ref:"dataForm",attrs:{model:a.dataForm,rules:a.rules,"status-icon":"","label-width":"120px","label-position":"left"}},[t("product-cust-info",{attrs:{needBizid:!1},on:{crmData:a.crmInfo}}),a._v(" "),t("div",{staticClass:"content-section"},[t("el-form-item",{attrs:{label:"实例名称",required:"",prop:"name"}},[t("el-input",{staticClass:"winput",attrs:{autocomplete:"off",size:"small"},model:{value:a.dataForm.name,callback:function(e){a.$set(a.dataForm,"name",e)},expression:"dataForm.name"}})],1),a._v(" "),t("el-form-item",{attrs:{label:"数据库引擎",required:""}},[t("el-radio-group",{attrs:{size:"small"},on:{change:a.handleDatatypeChange},model:{value:a.dataForm.datatype,callback:function(e){a.$set(a.dataForm,"datatype",e)},expression:"dataForm.datatype"}},a._l(a.staticData.databaseEngine,function(a){return t("el-radio-button",{key:a.keyValue,attrs:{label:a.keyValue}})}),1)],1),a._v(" "),t("el-form-item",{attrs:{label:"数据库版本",required:""}},[t("el-radio-group",{attrs:{size:"small"},model:{value:a.dataForm.edition,callback:function(e){a.$set(a.dataForm,"edition",e)},expression:"dataForm.edition"}},a._l(a.databaseVersion,function(a){return t("el-radio-button",{key:a.keyValue,attrs:{label:a.keyValue}})}),1)],1),a._v(" "),t("el-form-item",{attrs:{label:"实例类型",required:""}},[t("el-radio-group",{attrs:{size:"small"},model:{value:a.dataForm.exampletype,callback:function(e){a.$set(a.dataForm,"exampletype",e)},expression:"dataForm.exampletype"}},a._l(a.staticData.instanceType,function(a){return t("el-radio-button",{key:a.keyValue,attrs:{label:a.keyValue}})}),1)],1)],1),a._v(" "),t("div",{staticClass:"content-section"},[t("el-form-item",{attrs:{label:"性能规格",required:""}},[t("el-radio-group",{attrs:{size:"small"},model:{value:a.performance,callback:function(e){a.performance=e},expression:"performance"}},[t("el-radio-button",{attrs:{label:"通用增强型"}})],1),a._v(" "),t("div",{staticClass:"cpulist"},[t("el-table",{attrs:{data:a.staticData.capabilityFormat,stripe:!0,"max-height":"400px"}},[t("el-table-column",{attrs:{label:"",width:"25"},scopedSlots:a._u([{key:"default",fn:function(e){return[t("el-radio",{attrs:{label:e.row.keyValue},nativeOn:{change:function(t){return a.getTemplateRow(e.$index,e.row)}},model:{value:a.templateRadio,callback:function(e){a.templateRadio=e},expression:"templateRadio"}},[a._v("\n                         \n                      ")])]}}])}),a._v(" "),t("el-table-column",{attrs:{label:"CPU/内存",prop:"keyValue"}})],1),a._v(" "),t("div",{staticClass:"cpu-detail"},[t("span",[a._v("当前选择实例：")]),a._v(" "),t("span",[a._v(a._s(a.specsData.keyValue))])])],1)],1),a._v(" "),t("el-form-item",{attrs:{label:"存储空间(GB)",required:""}},[t("el-radio-group",{attrs:{size:"small"},model:{value:a.dataForm.savespace,callback:function(e){a.$set(a.dataForm,"savespace",e)},expression:"dataForm.savespace"}},a._l(a.staticData.storage,function(a){return t("el-radio-button",{key:a.keyValue,attrs:{label:a.keyValue}})}),1)],1)],1),a._v(" "),t("div",{staticClass:"content-section"},[t("el-form-item",{attrs:{label:"管理员账户名"}},[t("span",[a._v("root")])]),a._v(" "),t("el-form-item",{attrs:{label:"管理员密码",prop:"pass",required:""}},[t("el-input",{staticClass:"winput",attrs:{type:"password","show-password":"",autocomplete:"off",size:"small"},model:{value:a.dataForm.pass,callback:function(e){a.$set(a.dataForm,"pass",e)},expression:"dataForm.pass"}}),a._v(" "),t("span",{staticClass:"input-tips"},[a._v("请妥善管理密码，系统无法获取您设置的密码内容。")])],1),a._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPass",required:""}},[t("el-input",{staticClass:"winput",attrs:{type:"password","show-password":"",autocomplete:"off"},model:{value:a.dataForm.checkPass,callback:function(e){a.$set(a.dataForm,"checkPass",e)},expression:"dataForm.checkPass"}})],1)],1),a._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"content-section"},[t("el-form-item",{attrs:{label:"购买时长：",required:""}},[t("el-select",{staticClass:"winput",attrs:{disabled:""},model:{value:a.dataForm.buyTime,callback:function(e){a.$set(a.dataForm,"buyTime",e)},expression:"dataForm.buyTime"}},a._l(a.staticData.timeList,function(a){return t("el-option",{key:a.keyValue,attrs:{label:a.keyName,value:a.keyValue}})}),1)],1),a._v(" "),t("el-form-item",{attrs:{label:"购买数量：",required:""}},[t("el-input-number",{attrs:{min:1,max:Number(a.staticData.numList.keyValue),disabled:"",step:1,"step-strictly":""},model:{value:a.dataForm.buyNum,callback:function(e){a.$set(a.dataForm,"buyNum",e)},expression:"dataForm.buyNum"}})],1)],1)],1)],1),a._v(" "),t("div",{staticClass:"bottom-container"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"bottom-container__content",attrs:{span:12}},[t("div",{staticClass:"price"},[t("span",{staticClass:"price-text"},[a._v("配置费用")]),a._v(" "),t("span",{staticClass:"price-detail"},[a._v("￥540.00")])]),a._v(" "),t("div",{staticClass:"tips"},[a._v("\n              参考价格，具体扣费请以账单为准。\n            ")])]),a._v(" "),t("el-col",{staticClass:"submit-box",attrs:{span:24}},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){return a.submitForm("dataForm")}}},[a._v("\n              立即购买\n            ")])],1)],1)],1)])]),a._v(" "),t("product-order",{directives:[{name:"show",rawName:"v-show",value:2===a.payMent,expression:"payMent === 2"}],attrs:{orderInitData:a.orderInitData},on:{showPage:a.showPage}})],1)},m=[],d={render:u,staticRenderFns:m},p=d,b=t("VU/8"),y=s,f=b(c,p,!1,y,"data-v-4368721e",null);e.default=f.exports},Yn07:function(a,e,t){var s=t("58EQ");"string"==typeof s&&(s=[[a.i,s,""]]),s.locals&&(a.exports=s.locals);t("rjj0")("2d0c5e54",s,!0,{})}});