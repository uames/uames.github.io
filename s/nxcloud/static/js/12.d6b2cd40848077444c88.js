webpackJsonp([12],{H1TW:function(e,t,a){"use strict";a.d(t,"a",function(){return c});var r=a("Xxa5"),o=a.n(r),i=a("exGp"),s=a.n(i),n=a("Z1y9"),m=this,c=function(){var e=s()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.get("/ningxia/net/queryNetAddress",t));case 1:case"end":return e.stop()}},e,m)}));return function(t){return e.apply(this,arguments)}}();!function(){var e=s()(o.a.mark(function e(t){return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.a.get("/pms/getPortalStatic",t));case 1:case"end":return e.stop()}},e,m)}))}()},NNER:function(e,t,a){"use strict";function r(e){a("hTz8")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("Dd8w"),i=a.n(o),s=a("Xxa5"),n=a.n(s),m=a("exGp"),c=a.n(m),l=a("UgCr"),d=a("H1TW"),u=a("F0FI"),p=(u.a,{components:{ProductUserProject:u.a},data:function(){return{productInfo:{},totalPrice:0,unitPrice:0,priceLoading:!1,payMent:1,crmData:{city:"",region:"",crmCustId:"",crmCustIdTmp:"",showCusId:"",accountId:"",accountIdTmp:"",showAccountId:"",yunAccountInfo:"",yunAccountTmp:""},projectData:{},hasContract:!1,userStatus:"",serveDialogVisible:!1,productDialogVisible:!1,descData:{},staticData:{isOutAccount:{},accountType:{},charging:{},cloudHost:{},imagesTypeList:[],loginType:{},ipChoose:{},orderType:{},systemType:[],cpu:{},timeList:[],numList:{}},formData:{buyTime:{keyValue:1},buyNum:1,exchId:"",resourcePool:{regionKey:""},isUserBringOwnAddrIntoNetwork:0,ipAddrNum:1,ipAddr:"",agreementNo:null,agreementPartiesName:"",agreementPrice:0,agreementPayTime:"",agreementEffectTime:"",expirationDate:"",isContractAssets:0,affiliatedUnits:"",maintenanceManager:"",customerManager:"",customerManagerContactNum:""},flavorId:"",specsData:{flavorComment:"",flavorDetailList:[],flavorId:"",flavorName:"",flavorPrice:""},resourcePoolList:[{zoneName:"医疗基础云",regionKey:"10010",rd:"RD10010:1",rt:"RT10010:2"},{zoneName:"教育基础云",regionKey:"20010",rd:"RD20010:1",rt:"RD20010:2"},{zoneName:"互联网基础云",regionKey:"30010",rd:"RD30010:1",rt:"RD30010:2"}],flavorList:[],imagesTypeList:[],imagesSysTemList:[],imagesList:[],vpcList:[],subNetList:[],securityGroupList:[],searchFlavors:{cpuNum:"",memSize:"",cpuNumList:[],memSizeList:[]},configLoaidng:!1,isDefaultVpc:!1,configData:[],orderInitData:{},safeGroupList:[],selectResourcePool:{},addressLoading:!1,addressOptions:[],addressDes:{id:"",name:""},searchAgreementNo:null,contractLoading:!1,contractOptions:[],contractDes:{}}},created:function(){this.userStatus=this.$store.getters.userInfo.userStatus;var e=this;e.configLoaidng=!0,setTimeout(function(){e.configLoaidng=!1},2e3),this.getFlavors();var t=this.resourcePoolList[0];this.formData.resourcePool=t,this.selectResourcePool=t},mounted:function(){document.documentElement.scrollTop=0},methods:{resourceChange:function(){try{this.configLoaidng=!0,this.formData.vpc="",this.formData.subNet="",this.formData.securityGroup=""}catch(e){console.error(e)}finally{this.configLoaidng=!1}},getFlavors:function(){var e=this;return c()(n.a.mark(function t(){var a,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.configLoaidng=!0,t.next=4,Object(l.n)();case 4:a=t.sent,Array.isArray(a)?(e.flavorList=a,e.handleClickFlavor(a[0])):(r={cpuNum:"",flavorName:"",id:"",memSize:""},e.handleClickFlavor(r));case 6:return t.prev=6,e.configLoaidng=!1,t.finish(6);case 9:case"end":return t.stop()}},t,e,[[0,,6,9]])}))()},handleClickFlavor:function(e){if(e){this.flavorId=e.flavorId;for(var t in this.specsData)this.specsData[t]=e[t];this.getPrice()}},crmInfo:function(e){this.crmData=e},handleProject:function(e){this.projectData=e},getContractMethod:function(e){var t=this;return c()(n.a.mark(function a(){var r,o,i;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(""!==e){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,t.hasContract=!1,t.contractLoading=!0,t.contractOptions=[],a.next=8,Object(l.A)({contractID:e});case 8:r=a.sent,o=JSON.parse(r).responses,console.log("contract",o),0!==Number(o.errorCode)&&t.$message.error(o.errorMsg),i=o.resultobject,t.contractOptions=i,a.next=20;break;case 16:a.prev=16,a.t0=a.catch(2),console.error(a.t0),t.contractOptions=[];case 20:return a.prev=20,t.contractLoading=!1,a.finish(20);case 23:case"end":return a.stop()}},a,t,[[2,16,20,23]])}))()},handleContractChange:function(e){if(e){var t=this.contractOptions;t=t.filter(function(t){return t.item_id===e});var a=t[0],r=a.contract_code,o=a.apply_dept,s=a.trade_sum,n=a.income_begin_date,m=a.sign_date,c=a.end_date,l=a.if_from_gj,d=(a.apply_dept_id,a.client_name);this.contractDes={agreementNo:r,agreementPartiesName:o,agreementPrice:s,agreementPayTime:n,agreementEffectTime:m,expirationDate:c,isContractAssets:l,customerManager:d},this.hasContract=!0,this.formData=i()({},this.formData,this.contractDes)}},switchData:function(){var e=this,t=[],a=e.formData,r=e.projectData,o=e.formData.resourcePool,i=o.regionKey,s=o.rd,n=o.rt;t.push({itemCode:"businessType",itemId:"businessType",itemCodeName:i,itemCodeValue:i,itemIdType:"",itemMode:"",itemName:"资源池"}),t.push({itemCode:"rd",itemId:"rd",itemCodeName:s,itemCodeValue:s,itemIdType:"",itemMode:"",itemName:"资源池"}),t.push({itemCode:"rt",itemId:"rt",itemCodeName:n,itemCodeValue:n,itemIdType:"",itemMode:"",itemName:"资源池"}),t.push({itemCode:"",itemId:"addrId",itemCodeName:e.addressDes.id,itemCodeValue:e.addressDes.id,itemName:"装机地址Id",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"situated",itemCodeName:e.addressDes.name,itemCodeValue:e.addressDes.name,itemName:"装机地址",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"isUserBringOwnAddrIntoNetwork",itemCodeName:a.isUserBringOwnAddrIntoNetwork,itemCodeValue:a.isUserBringOwnAddrIntoNetwork,itemName:"是否自带地址入网",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"ipAddrNum",itemCodeName:a.ipAddrNum,itemCodeValue:a.ipAddrNum,itemName:"IP地址个数",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"ipAddr",itemCodeName:a.ipAddr,itemCodeValue:a.ipAddr,itemName:"IP地址",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"agreementNo",itemCodeName:a.agreementNo,itemCodeValue:a.agreementNo,itemName:"协议编号",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"agreementPartiesName",itemCodeName:a.agreementPartiesName,itemCodeValue:a.agreementPartiesName,itemName:"签订协议单位名称",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"agreementPrice",itemCodeName:a.agreementPrice,itemCodeValue:a.agreementPrice,itemName:"协议总价",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"agreementPayTime",itemCodeName:a.agreementPayTime,itemCodeValue:a.agreementPayTime,itemName:"协议约定回款时间",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"agreementEffectTime",itemCodeName:a.agreementEffectTime,itemCodeValue:a.agreementEffectTime,itemName:"协议生效时间",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"expirationDate",itemCodeName:a.expirationDate,itemCodeValue:a.expirationDate,itemName:"协议到期时间",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"isContractAssets",itemCodeName:a.isContractAssets,itemCodeValue:a.isContractAssets,itemName:"是否合同资产",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"projectName",itemCodeName:r.tenantName,itemCodeValue:r.tenantName,itemName:"项目名称",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"projectNo",itemCodeName:r.tenantId,itemCodeValue:r.tenantId,itemName:"项目编号",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"affiliatedUnits",itemCodeName:a.affiliatedUnits,itemCodeValue:a.affiliatedUnits,itemName:"所属单位",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"maintenanceManager",itemCodeName:a.maintenanceManager,itemCodeValue:a.maintenanceManager,itemName:"维护经理",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"customerManager",itemCodeName:a.customerManager,itemCodeValue:a.customerManager,itemName:"客户经理",itemIdType:"",itemMode:""}),t.push({itemCode:"",itemId:"customerManagerContactNum",itemCodeName:a.customerManagerContactNum,itemCodeValue:a.customerManagerContactNum,itemName:"客户经理联系电话",itemIdType:"",itemMode:""}),this.specsData.flavorDetailList.forEach(function(e){t.push({itemCode:e.attrId,itemCodeName:"",itemCodeValue:e.attrValue,itemId:"",itemIdType:"",itemMode:"",itemName:"规格"})}),this.configData=t},getPrice:function(){var e=this;return c()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.totalPrice=e.multiply_(e.specsData.flavorPrice,e.formData.buyNum,e.formData.buyTime.keyValue);case 1:case"end":return t.stop()}},t,e)}))()},goOrder:function(){this.switchData();var e=[],t={productId:8,productName:"NCE网",orderType:7,perPrice:this.totalPrice,unitPrice:this.totalPrice,data:this.formData,crmData:this.crmData,productFiles:e,configData:this.configData,flavorId:this.specsData.flavorId,flavorName:this.specsData.flavorName,tableShowData:{config:this.specsData.flavorComment,time:this.formData.buyTime.keyName,num:this.formData.buyNum}};this.orderInitData=t,this.payMent=2},showPage:function(){this.payMent=1},changePool:function(e){this.selectResourcePool=e,this.formData.resourcePool=e},remoteMethod:function(e){var t=this;return c()(n.a.mark(function a(){var r,o;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(""!==e){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,t.addressLoading=!0,t.addressOptions=[],a.next=7,Object(d.a)({addressName:e});case 7:r=a.sent,o=r.ContractRoot.SvcCont.AddressList,t.addressOptions=o,a.next=16;break;case 12:a.prev=12,a.t0=a.catch(2),console.error(a.t0),t.addressOptions=[];case 16:return a.prev=16,t.addressLoading=!1,a.finish(16);case 19:case"end":return a.stop()}},a,t,[[2,12,16,19]])}))()},handleAddressChange:function(e){e&&(this.addressDes={id:e.STANDARD_ID,name:e.STANDARD_NAME})}}}),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"productPage"},[a("product-process",{attrs:{title:"NCE网",payMent:e.payMent}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:1===e.payMent,expression:"payMent === 1"}],staticClass:"main"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.configLoaidng,expression:"configLoaidng"}],staticClass:"productBox"},[a("el-form",{attrs:{"label-width":"110px","label-position":"left"}},[a("product-cust-info",{attrs:{needTitle:!0,needBizid:!1},on:{crmData:e.crmInfo}}),e._v(" "),a("product-user-project",{attrs:{userData:e.crmData,showZWCustInfo:!1},on:{"change-project":e.handleProject}}),e._v(" "),a("product-flavor",{attrs:{title:"销售品",flavorId:e.flavorId,flavorList:e.flavorList},on:{"change-flavor":e.handleClickFlavor}}),e._v(" "),a("div",{staticClass:"content-section"},[a("el-form-item",{attrs:{label:"业务"}},[a("el-row",{staticClass:"resource",attrs:{gutter:12}},e._l(e.resourcePoolList,function(t){return a("el-col",{key:t.regionKey,staticClass:"resource-item",class:{"active-resourceitem":t.regionKey===e.formData.resourcePool.regionKey},attrs:{span:6,value:t.regionKey},nativeOn:{click:function(a){return e.changePool(t)}}},[e._v("\n                "+e._s(t.zoneName)+"\n              ")])}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"装机地址",required:""}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"","reserve-keyword":"","remote-method":e.remoteMethod,loading:e.addressLoading,size:"small","value-key":"STANDARD_ID",placeholder:"请输入关键词搜索"},on:{change:e.handleAddressChange},model:{value:e.formData.address,callback:function(t){e.$set(e.formData,"address",t)},expression:"formData.address"}},e._l(e.addressOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.STANDARD_NAME,value:e}})}),1)],1)],1),e._v(" "),a("div",{staticClass:"content-section"},[a("section-title",{attrs:{title:"IP地址"}}),e._v(" "),a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否自带地址入网",prop:"isUserBringOwnAddrIntoNetwork"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.formData.isUserBringOwnAddrIntoNetwork,callback:function(t){e.$set(e.formData,"isUserBringOwnAddrIntoNetwork",t)},expression:"formData.isUserBringOwnAddrIntoNetwork"}},[a("el-radio-button",{attrs:{label:1}},[e._v("是")]),e._v(" "),a("el-radio-button",{attrs:{label:0}},[e._v("否")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[1===e.formData.isUserBringOwnAddrIntoNetwork?a("el-form-item",{attrs:{label:"IP地址",prop:"ipAddr"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small"},model:{value:e.formData.ipAddr,callback:function(t){e.$set(e.formData,"ipAddr",t)},expression:"formData.ipAddr"}})],1):a("el-form-item",{attrs:{label:"IP地址个数",prop:"ipAddrNum"}},[a("el-radio-group",{attrs:{size:"small"},model:{value:e.formData.ipAddrNum,callback:function(t){e.$set(e.formData,"ipAddrNum",t)},expression:"formData.ipAddrNum"}},[a("el-radio-button",{attrs:{label:1}},[e._v("1")]),e._v(" "),a("el-radio-button",{attrs:{label:5}},[e._v("5")]),e._v(" "),a("el-radio-button",{attrs:{label:13}},[e._v("13")])],1)],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"content-section"},[a("section-title",{attrs:{title:"合同"}}),e._v(" "),a("el-form-item",{attrs:{label:"IDC合同/协议编码"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{filterable:"",remote:"","reserve-keyword":"","remote-method":e.getContractMethod,loading:e.contractLoading,size:"small",placeholder:"请输入关键词搜索"},on:{change:e.handleContractChange},model:{value:e.searchAgreementNo,callback:function(t){e.searchAgreementNo=t},expression:"searchAgreementNo"}},e._l(e.contractOptions,function(e){return a("el-option",{key:e.id,attrs:{label:e.item_name,value:e.item_id}})}),1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.hasContract,expression:"hasContract"}],attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"协议编号"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small",readonly:""},model:{value:e.formData.agreementNo,callback:function(t){e.$set(e.formData,"agreementNo",t)},expression:"formData.agreementNo"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"签订协议单位名称"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small",readonly:""},model:{value:e.formData.agreementPartiesName,callback:function(t){e.$set(e.formData,"agreementPartiesName",t)},expression:"formData.agreementPartiesName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"协议总价"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small",readonly:""},model:{value:e.formData.agreementPrice,callback:function(t){e.$set(e.formData,"agreementPrice",t)},expression:"formData.agreementPrice"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"协议约定回款时间"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small",readonly:""},model:{value:e.formData.agreementPayTime,callback:function(t){e.$set(e.formData,"agreementPayTime",t)},expression:"formData.agreementPayTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"协议生效时间"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small",readonly:""},model:{value:e.formData.agreementEffectTime,callback:function(t){e.$set(e.formData,"agreementEffectTime",t)},expression:"formData.agreementEffectTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"协议到期时间"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small",readonly:""},model:{value:e.formData.expirationDate,callback:function(t){e.$set(e.formData,"expirationDate",t)},expression:"formData.expirationDate"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"是否合同资产",prop:"isContractAssets"}},[a("el-radio-group",{attrs:{disabled:"",size:"small"},model:{value:e.formData.isContractAssets,callback:function(t){e.$set(e.formData,"isContractAssets",t)},expression:"formData.isContractAssets"}},[a("el-radio-button",{attrs:{label:0}},[e._v("是")]),e._v(" "),a("el-radio-button",{attrs:{label:1}},[e._v("否")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户经理",prop:"customerManager"}},[a("el-input",{staticClass:"w-220",attrs:{readonly:"",type:"text",autocomplete:"off",size:"small"},model:{value:e.formData.customerManager,callback:function(t){e.$set(e.formData,"customerManager",t)},expression:"formData.customerManager"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"content-section"},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"客户经理联系电话",prop:"customerManagerContactNum"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small"},model:{value:e.formData.customerManagerContactNum,callback:function(t){e.$set(e.formData,"customerManagerContactNum",t)},expression:"formData.customerManagerContactNum"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"所属单位"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small"},model:{value:e.formData.affiliatedUnits,callback:function(t){e.$set(e.formData,"affiliatedUnits",t)},expression:"formData.affiliatedUnits"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"维护经理",prop:"maintenanceManager"}},[a("el-input",{staticClass:"w-220",attrs:{type:"text",autocomplete:"off",size:"small"},model:{value:e.formData.maintenanceManager,callback:function(t){e.$set(e.formData,"maintenanceManager",t)},expression:"formData.maintenanceManager"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.priceLoading,expression:"priceLoading"}],staticClass:"rightBox"},[a("product-tool-box",{attrs:{productInfo:e.productInfo,totalPrice:e.totalPrice,specsData:e.specsData},on:{"go-order":e.goOrder}})],1)]),e._v(" "),a("product-order",{directives:[{name:"show",rawName:"v-show",value:2===e.payMent,expression:"payMent === 2"}],attrs:{orderInitData:e.orderInitData},on:{showPage:e.showPage}})],1)},g=[],v={render:f,staticRenderFns:g},h=v,C=a("VU/8"),D=r,N=C(p,h,!1,D,"data-v-1f5b602b",null);t.default=N.exports},hTz8:function(e,t,a){var r=a("vwZW");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("ee26f43c",r,!0,{})},vwZW:function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"NecProduct.vue",sourceRoot:""}])}});