<!DOCTYPE html><html lang="en"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> mongoexport导出命令中-q的参数中$gt以及ISO日期的书写格式 · A place for myself to write something</title><meta name="description" content="mongoexport导出命令中-q的参数中$gt以及ISO日期的书写格式 - uames"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="short icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="stylesheet" href="http://fonts.useso.com/css?family=Source+Sans+Pro:400,600" type="text/css"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="https://github.com/uames" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><section class="container"><div class="post"><article class="post-block"><h1 class="post-title">mongoexport导出命令中-q的参数中$gt以及ISO日期的书写格式</h1><div class="post-info">Nov 20, 2019</div><div class="post-content"><h2 id="mongoexport可以用于导出mongodb的数据，但-q命令中的的参数中-gt以及ISO日期的书写格式却不是很确定。"><a href="#mongoexport可以用于导出mongodb的数据，但-q命令中的的参数中-gt以及ISO日期的书写格式却不是很确定。" class="headerlink" title="mongoexport可以用于导出mongodb的数据，但-q命令中的的参数中$gt以及ISO日期的书写格式却不是很确定。"></a>mongoexport可以用于导出mongodb的数据，但-q命令中的的参数中$gt以及ISO日期的书写格式却不是很确定。</h2><p>$gt在-q的JSON格式参数中，有直接用’’包裹，如:<code>{&#39;$gt&#39;:&#39;&#39;}</code>的写法,也有用反斜杠转义\$字符的写法如<code>{\$gt:&#39;&#39;}</code>，而如果直接写<code>{$gt:&#39;&#39;}</code>，不使用’’或\则会报错。</p>
<p>关于ISO日期，网上许多资料有用“2019-11-06T10:09:54.677Z”和“2019-11-08T21:45:48”以及“1573220748000”和“ISODate(‘2019-11-11T03:00:00.000Z’)”，甚至用于分隔日期和时间的T是否要加都有不同说法：<a href="https://stackoverflow.com/questions/27591117/mongoexport-q-isodate-query" target="_blank" rel="noopener">stackoverflow</a></p>
<p>参考了stackoverflow中的文章，且根据其链接进入了mongo官网找到了“mongoexport”命令的用法和示例：<a href="https://docs.mongodb.com/v2.4/reference/program/mongoexport/index.html" target="_blank" rel="noopener">mongoexport</a></p>
<p>参考示例的用法，进行了多次实践后证实，mongoexport 3.0.6版的导出命令中-q参数中，大于某个时间的参数格式应该是：<code>{\$gt:ISODate(&#39;2019-11-11T00:00:00.000Z&#39;)}</code>，这个参数就是用于筛选出2019年11月11日当天0点之后的数据。</p>
<p>完整的命令示例：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mongoexport -d browser_production -c logs --<span class="built_in">type</span>=csv -f _id,companyId,<span class="built_in">type</span>,currentUser,relatedId,detail,createdAt -q <span class="string">"&#123;'type':'客户端登录','createdAt':&#123;\$gte:ISODate('2019-11-11T00:00:00.000Z')&#125;&#125;"</span> -o /home/logs.csv</span><br></pre></td></tr></table></figure></p>
</div></article></div></section><footer><div class="paginator"><a href="/2019/2019-06-05-aws-ec2-ubuntu18配置shadowsocks/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2020 <a href="https://uames.github.io">uames</a>, unless otherwise noted.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.6.1/MathJax.js?config=TeX-MML-AM_CHTML"></script></body></html>